/*!CK:3652770165!*//*1456170331,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["Uuj1J"]); }

__d("ApiVideoStatusType",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={READY:"ready",PROCESSING:"processing",ERROR:"error",EXPIRED:"expired"};},null);
__d('CustomAudienceTosUtils',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();h.prototype.getTosRequirements=function(i){'use strict';return {custom_audience:i?228298987271350:215449065224656,website_custom_audience:206760949512025,mobile_app_custom_audience:206760949512025};};h.prototype.isWcaTosAccepted=function(i){'use strict';var j=this.getTosRequirements().website_custom_audience;return !!(i&&(i.web_custom_audience_tos||i[j]));};function h(){'use strict';}f.exports=new h();},null);
__d('AdsLabeledField.react',['AdsHelpLink.react','React','XUIText.react','cx','fbt','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';if(c.__markCompiled)c.__markCompiled();var n=i.PropTypes,o=i.createClass({displayName:'AdsLabeledField',propTypes:{className:n.string,label:n.oneOfType([n.string.isRequired,n.node.isRequired]),helpText:n.node,helpLinger:n.number,htmlFor:n.string,labelSize:n.oneOf(['small','medium']),optional:n.bool,optionalText:n.node},getDefaultProps:function(){return {label:null,labelSize:'small',optionalText:l._("(optional)")};},render:function(){return (i.createElement('div',babelHelpers['extends']({},this.props,{className:m(this.props.className,"_3bvz")}),this._renderLabel(),this._renderHelpIcon(),i.createElement('div',{className:"_3bv-"},this.props.children)));},_renderLabel:function(){var p=null;if(this.props.optional)p=i.createElement(j,{weight:'normal'},this.props.optionalText);return (i.createElement('label',{className:"_4el4"+(this.props.labelSize==='small'?' '+"_3qwj":'')+(this.props.labelSize==='medium'?' '+"_3qwk":'')+(!this.props.htmlFor?' '+"_3hy-":''),htmlFor:this.props.htmlFor},l._("{Part of label for an ads field must have a value.} {Part of label for a field that doesn't need a value}",[l.param('Part of label for an ads field must have a value.',this.props.label),l.param('Part of label for a field that doesn\'t need a value',p)])));},_renderHelpIcon:function(){var p=this.props.helpText,q=p?i.createElement(h,{imgHover:this.props.imgHover,imgNormal:this.props.imgNormal,linger:this.props.helpLinger,width:300},p):null;return q;}});f.exports=o;},null);
__d('AdsRichSelector.react',['ContextualLayer.react','ContextualLayerAutoFlip','ContextualLayerUpdateOnScroll','DOM','Image.react','InlineBlock.react','React','ReactDOM','ReactChildren','ReactLayeredComponentMixin','ScrollableArea','ScrollableArea.react','Style','SubscriptionsHandler','XUIError.react','XUIPopoverButton.react','XUISpinner.react','cloneWithProps_DEPRECATED','cx','emptyFunction','invariant','joinClasses','requestAnimationFrame'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da){'use strict';if(c.__markCompiled)c.__markCompiled();var ea=n.PropTypes,fa={ContextualLayerAutoFlip:i,ContextualLayerUpdateOnScroll:j};function ga(ma,na,oa){!(p.count(ma.children)>0)?ba(0):undefined;var pa=null,qa=p.map(ma.children,function(ra){switch(ra.type){default:case ja:if(oa==null&&!ma.defaultLabel)oa=ra.props.value;if(oa===ra.props.value){pa=ra;na.selected=true;}else na.selected=false;return y(ra,na);case ka:pa=pa||ga(ra.props,na,oa).selectedItem;return y(ra,na);case la:return ra;}});return {items:qa,selectedItem:pa};}var ha=n.createClass({displayName:'AdsRichSelector',mixins:[q],propTypes:babelHelpers['extends']({alignment:ea.oneOf(['left','center','right']),createNewItem:ea.node,defaultLabel:ea.oneOfType([ea.object,ea.string]),disabled:ea.bool,height:ea.number,image:ea.object,label:ea.oneOfType([ea.node,ea.string]),maxheight:ea.number,maxMenuWidth:ea.number,maxwidth:ea.number,noLabel:ea.bool,onChange:ea.func,onDropdown:ea.func,requireSelection:ea.bool,size:ea.string,suppressed:ea.bool,useMenuDividers:ea.bool},v.propTypes),_scrollableArea:null,getDefaultProps:function(){return {defaultLabel:'',onDropdown:aa,requireSelection:true};},getInitialState:function(){!(!this.props.height||!this.props.maxheight)?ba(0):undefined;return {preShowLayer:false,showLayer:false,value:this.props.defaultValue};},componentDidMount:function(){this.subscriptions=new u();this.subscriptions.addSubscriptions(this.refs.menu.layer.subscribe('blur',this._onBlur),this.refs.menu.layer.subscribe('hide',this._onBlur));this._setMaxHeight();},componentWillReceiveProps:function(ma){!(!ma.height||!ma.maxheight)?ba(0):undefined;if('defaultValue' in ma)this.setState({value:ma.defaultValue});},componentWillUnmount:function(){this.subscriptions.release();},componentDidUpdate:function(ma){if(ma.maxheight!==this.props.maxheight)this._setMaxHeight();},render:function(){var ma={onSelect:this._onSelect},na=ga(this.props,ma,this.state.value),oa=na.selectedItem,pa=undefined;if(this.props.label){pa=this.props.label;}else if(oa){pa=this.props.noLabel?'':oa.props.label;}else pa=this.props.defaultLabel;var qa=undefined;if(this.props.image){qa=this.props.image;}else if(oa){qa=oa.props.icon;}else qa=null;return (n.createElement(v,this.props,n.createElement(m,{alignv:'middle',className:ca(this.state.showLayer?"openToggler":'',this.props.className),name:null},n.createElement(w,{className:"_5mhp"+(this.state.showLayer?' '+"selected":'')+(this.state.showLayer&&this.props.alignment!='right'?' '+"_nk":'')+(this.state.showLayer&&this.props.alignment=='right'?' '+"_nl":''),'data-hover':'tooltip','data-tooltip-alignh':this.props.alignh||'left','data-tooltip-alignv':this.props.alignv||'above','data-tooltip-content':this.props.tooltip||null,depressed:this.state.showLayer,disabled:this.props.disabled||false,image:qa,label:pa,maxwidth:this.props.maxwidth||0,ref:'selectorButton',size:this.props.size||'medium',suppressed:this.props.suppressed||false,theme:this.props.theme||'dark',onClick:this._toggleSelector}))));},_getBehaviors:function(){return babelHelpers['extends']({},fa,this.props.behaviors);},renderLayers:function(){var ma={onSelect:this._onSelect},na=null;if(this.state.showLayer||this.state.preShowLayer)na=ga(this.props,ma,this.state.value).items;if(this.state.showLayer)this.props.onDropdown();var oa=n.createElement('ul',{className:"_54nf"+(this.props.useMenuDividers?' '+"_4fau":''),ref:'menuItems',role:'menu',style:{maxWidth:this.props.maxMenuWidth}},na),pa=this.props.height?n.createElement(s,{height:this.props.height},oa):oa;return {menu:n.createElement(h,{alignment:this.props.alignment||'left',behaviors:this._getBehaviors(),contextRef:function(){return this.refs.selectorButton;}.bind(this),position:'below',ref:'menu',shown:this.state.showLayer},n.createElement('div',{className:"_54nq _575t _57di _558b"},this.props.createNewItem,n.createElement('div',{className:"_x4b",ref:'menuContainer'},pa)))};},_setMaxHeight:function(){var ma=o.findDOMNode(this.refs.menuItems),na=o.findDOMNode(this.refs.menuContainer);if(this.props.maxheight){var oa=r.renderDOM();this._scrollableArea=oa.root;k.setContent(oa.content,ma);t.set(oa.wrap,'max-height',this.props.maxheight+'px');k.setContent(na,this._scrollableArea);}else if(this._scrollableArea)k.setContent(na,ma);},_toggleSelector:function(){if(!this.props.disabled)this._setLayerShownState(true);},_onBlur:function(){da(function(){if(this.isMounted())this._setLayerShownState(false);}.bind(this));},_setLayerShownState:function(ma,na){if(ma&&ma!==this.state.showLayer){this.setState(babelHelpers['extends']({preShowLayer:true},na),function(){this.setState({showLayer:ma,preShowLayer:false});}.bind(this));}else this.setState(babelHelpers['extends']({showLayer:ma,preShowLayer:false},na));},_onSelect:function(ma){this._setLayerShownState(false,{image:ma.icon,value:ma.value});this.props.onChange&&this.props.onChange(ma);}}),ia=n.createClass({displayName:'AdsRichSelectorLoader',propTypes:{loadComplete:ea.bool.isRequired},render:function(){return (n.createElement(x,{background:'light',className:this.props.loadComplete?"hidden_elem":'',size:'large'}));}}),ja=n.createClass({displayName:'AdsRichSelectorOption',propTypes:{clickable:ea.bool,href:ea.string,label:ea.oneOfType([ea.object,ea.string]),onSelect:ea.func,selected:ea.bool,value:ea.oneOfType([ea.string,ea.number])},getDefaultProps:function(){return {clickable:true};},getInitialState:function(){return {highlighted:false};},render:function(){var ma=this._renderMenuItemContainer(),na=this.props.clickable,oa=null,pa=null,qa=null;if(na){!this.props.hasOwnProperty('value')?ba(0):undefined;oa=this._onSelect;pa=this._onMouseEnter;qa=this._onMouseLeave;ma=n.createElement('a',{className:"_54nc _4faw",href:this.props.href,ref:'menuItemAnchor',role:'menuitem',tabIndex:'0'},n.createElement('div',{className:"_4fax _ftt"}),ma);}var ra=this.state.highlighted;return (n.createElement('li',{className:ca("_54ni"+(na&&ra?' '+"_54ne":'')+(na&&this.props.selected?' '+"_4fav":''),this.props.className),onClick:oa,onMouseEnter:pa,onMouseLeave:qa},ma));},_renderMenuItemContainer:function(){var ma=this.props.children,na=this.props.icon;if(na){!(na.type===l)?ba(0):undefined;ma=n.createElement('div',{className:"_52ps"},n.createElement('div',{className:"_52pt prs"},na),ma);}return (n.createElement('div',{className:"_4fay"},ma));},_onSelect:function(ma){var na=ma.nativeEvent;if(!na||!na.isMiddleClick()&&!na.getModifiers().any){na.preventDefault();this.props.onSelect&&this.props.onSelect({icon:this.props.icon,label:this.props.label,value:this.props.value});}},_onMouseEnter:function(){this.setState({highlighted:true});},_onMouseLeave:function(){this.setState({highlighted:false});}}),ka=n.createClass({displayName:'AdsRichSelectorOptionGroup',propTypes:{onChange:ea.func,onSelect:ea.func},getInitialState:function(){return {value:this.props.defaultValue};},componentWillReceiveProps:function(ma){if('defaultValue' in ma)this.setState({value:ma.defaultValue});},_onSelect:function(ma){this.setState({value:ma.value});this.props.onSelect&&this.props.onSelect(ma);this.props.onChange&&this.props.onChange(ma);},render:function(){var ma=this.props,na=ma.className,oa=babelHelpers.objectWithoutProperties(ma,['className']),pa={onSelect:this._onSelect},qa=ga(oa,pa,this.state.value),ra=qa.items;return (n.createElement('li',{className:ca(na,"_b_x")},n.createElement('ul',null,ra)));}}),la=n.createClass({displayName:'AdsRichSelectorSeparator',propTypes:{label:ea.string,noBorder:ea.bool},render:function(){!!(p.count(this.props.children)&&this.props.label)?ba(0):undefined;var ma=this.props.children?this.props.children:this._renderSeparatorLabel();!(ma||!this.props.noBorder)?ba(0):undefined;return (n.createElement('li',{className:"_54ak"+(' '+"_52pu")+(!!this.props.noBorder?' '+"_52pv":'')},ma));},_renderSeparatorLabel:function(){if(!this.props.label)return null;return (n.createElement('h4',{className:"_52ri"},this.props.label));}});ha.Loader=ia;ha.Option=ja;ha.OptionGroup=ka;ha.Separator=la;f.exports=ha;},null);
__d('AdsAccountActions',['AdsActionTypes','AdsDispatcher'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j={accountBatchLoaded:function(k){i.handleUpdateFromServerResponse({accountSpecs:k,type:h.ACCOUNT.BATCH_LOADED});},accountBatchLoadError:function(k){i.handleUpdateFromServerResponse({errors:k,type:h.ACCOUNT.BATCH_LOAD_ERROR});},accountListPartialLoad:function(k,l,m){i.handleUpdateFromServerResponse({id:k,accounts:l,totalCount:m,type:h.ACCOUNT.LIST.PARTIAL_LOAD});},accountListLoaded:function(k,l){i.handleUpdateFromServerResponse({accounts:l,id:k,type:h.ACCOUNT.LIST.BATCH_LOADED});},accountListLoadError:function(k){i.handleUpdateFromServerResponse({id:k,type:h.ACCOUNT.LIST.BATCH_LOAD_ERROR});},invalidate:function(k){i.handleUpdateFromServerResponse({id:k,type:h.ACCOUNT.INVALIDATE});},rateCardListLoaded:function(k,l){i.handleUpdateFromServerResponse({accountID:k,rateCards:l,type:h.RATE_CARD.LIST.BATCH_LOADED});},rateCardListLoadError:function(k){i.handleUpdateFromServerResponse({accountID:k,type:h.RATE_CARD.LIST.BATCH_LOAD_ERROR});},rateCardBatchLoaded:function(k){i.handleUpdateFromServerResponse({rateCards:k,type:h.RATE_CARD.BATCH_LOADED});}};f.exports=j;},null);
__d('AdsBusinessActionTypes',['keyMirrorRecursive'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=h({BATCH_LOADED:null,BATCH_LOAD_ERROR:null},'AdsBusiness');f.exports=i;},null);
__d('AdsBusinessActions',['AdsBusinessActionTypes','AdsDispatcher'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j={batchLoaded:function(k){i.handleUpdateFromServerResponse({specs:k,type:h.BATCH_LOADED});},batchLoadError:function(k){i.handleUpdateFromServerResponse({errors:k,type:h.BATCH_LOAD_ERROR});}};f.exports=j;},null);
__d('AdsAccountDataManager',['AdsAccountActions','AdsAPIAdAccountFields','AdsBaseDataManager','AdsGraphAPI','CurrentUser','GraphAPIFieldUtils','Map','adsGKCheck','fbt','memoize'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){'use strict';var r,s;if(c.__markCompiled)c.__markCompiled();var t=q(function(){var w=[i.ACCOUNT_ID,i.CAPABILITIES,i.CREATED_TIME,i.CURRENCY,i.FUNDING_SOURCE,i.ID,i.IO_NUMBER,i.NAME,i.TIMEZONE_ID,i.TIMEZONE_OFFSETS,i.BUSINESS,i.USERPERMISSIONS+'.fields(business, role)\n      .user('+l.getID()+')',m.getFieldWithSubfields(i.BUSINESSLABELS,['business','name']),i.USERS];if(o('ads_pe_account_friendly_name'))w.push(i.FRIENDLY_NAME);return w;});r=babelHelpers.inherits(u,j);s=r&&r.prototype;u.prototype.loadAll=function(w){w.forEach(function(x){return this.load(x);}.bind(this));};u.prototype.load=function(w){k.get().adaccount(w).batched().get({fields:t()}).done(this.__handleSuccess.bind(this,['load'],w,null),this.__handleError.bind(this,['load'],w,null));};u.prototype.__onBatchLoaded=function(w){h.accountBatchLoaded(w);};u.prototype.__onBatchLoadError=function(w){h.accountBatchLoadError(w);};u.prototype.__getObjectTypeLabel=function(){return p._("Ad Account");};function u(){r.apply(this,arguments);}var v=new u();f.exports=v;},null);
__d('AdsBusinessDataManager',['AdsBaseDataManager','AdsBusinessActions','CurrentUser','GraphAPI','fbt','sprintf'],function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';var n,o;if(c.__markCompiled)c.__markCompiled();n=babelHelpers.inherits(p,h);o=n&&n.prototype;p.prototype.loadAll=function(q){q.forEach(function(r){return this.load(r);}.bind(this));};p.prototype.load=function(q){k('2.4').object('business',q).batched().get({fields:['id','name',m('userpermissions.fields(role).user(%s)',j.getAccountID())]}).done(this.__handleSuccess.bind(this,['load'],q,null),this.__handleError.bind(this,['load'],q,null));};p.prototype.__onBatchLoaded=function(q){i.batchLoaded(q);};p.prototype.__onBatchLoadError=function(q){i.batchLoadError(q);};p.prototype.__getObjectTypeLabel=function(){return l._("Business");};function p(){n.apply(this,arguments);}f.exports=new p();},null);
__d('AdsAccountStore',['AdsAccountDataManager','AdsActionTypes','AdsBaseDataStore','AdsLoadState','Timezone'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';var m,n;if(c.__markCompiled)c.__markCompiled();m=babelHelpers.inherits(o,j);n=m&&m.prototype;o.prototype.getDataManager=function(){return h;};o.prototype.__onDispatch=function(q){var r=q.action;switch(r.type){case i.ACCOUNT.BATCH_LOADED:this.$AdsAccountStoreClass1(r.accountSpecs);break;case i.ACCOUNT.BATCH_LOAD_ERROR:this.__handleData(r.errors,k.ERROR);break;case i.ACCOUNT.INVALIDATE:if(this.__invalidate(r.id))this.__emitChange();break;}};o.prototype.$AdsAccountStoreClass1=function(q){this.__handleData(q,k.LOADED);q.forEach(function(r){return l.setupTimezoneWithPHPTransitions(r.timezone_id,r.timezoneoffsets&&r.timezoneoffsets.data);});};function o(){m.apply(this,arguments);}var p=new o();f.exports=p;},null);
__d('AdsBusinessStore',['AdsBaseDataStore','AdsBusinessActionTypes','AdsBusinessDataManager','AdsLoadState'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';var l,m;if(c.__markCompiled)c.__markCompiled();l=babelHelpers.inherits(n,h);m=l&&l.prototype;n.prototype.getDataManager=function(){return j;};n.prototype.__onDispatch=function(o){var p=o.action;switch(p.type){case i.BATCH_LOADED:this.__handleData(p.specs,k.LOADED);break;case i.BATCH_LOAD_ERROR:this.__handleData(p.errors,k.ERROR);break;}};function n(){l.apply(this,arguments);}f.exports=new n();},null);
__d('AdsPixelUIEnvironments',['keyMirror'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=h({AM:null,CF:null,CM:null,LWI:null,PE:null});f.exports=i;},null);
__d('AdsAccountStoreWrapper_DEPRECATED',['AdInterfacesUiLogger','AdsAPIAdAccountFields','AdsAccountCapabilities','AdsAccountStore','AdsLoadState','AdsPixelUIEnvironments','CustomAudienceTosUtils','arrayContains','invariant'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){'use strict';if(c.__markCompiled)c.__markCompiled();q.prototype.getAccount=function(){if(!this.$AdsAccountStoreWrapperClass2){!this.$AdsAccountStoreWrapperClass4;return k.get(this.$AdsAccountStoreWrapperClass4);}return this.$AdsAccountStoreWrapperClass2.getSelectedAccount?this.$AdsAccountStoreWrapperClass2.getSelectedAccount():this.$AdsAccountStoreWrapperClass2.getAccount_DO_NOT_USE();};q.prototype.getAccountID=function(){return this.$AdsAccountStoreWrapperClass4||this.getAccount().account_id||this.getAccount().accountID||'';};q.prototype.getAccountName=function(){return this.getAccount().name||'';};q.prototype.getCurrency=function(){var s=this.getAccount()[i.CURRENCY];!s?p(0):undefined;return s;};q.prototype.getTimezoneID=function(){var s=this.getAccount()[i.TIMEZONE_ID];!(s!=null)?p(0):undefined;return s;};q.prototype.getTimezoneName=function(){var s=this.getAccount()[i.TIMEZONE_NAME];return s;};q.prototype.getUserSettings=function(){var s=this.getAccount()[i.USER_SETTINGS];!(s!=null)?p(0):undefined;return s;};q.prototype.getFluxStore=function(){return this.$AdsAccountStoreWrapperClass2;};q.prototype.getEnvironment=function(){return this.$AdsAccountStoreWrapperClass1;};q.prototype.setTosAccepted=function(){this.$AdsAccountStoreWrapperClass3=true;};q.prototype.isAccountLoaded=function(){return this.getAccount().loadState===l.LOADED;};q.prototype.isTosAccepted=function(){if(this.$AdsAccountStoreWrapperClass3)return true;var s=this.$AdsAccountStoreWrapperClass2.getTosAccepted()||{};return n.isWcaTosAccepted(s);};q.prototype.setAccountID=function(s){this.$AdsAccountStoreWrapperClass4=s;k.get(this.$AdsAccountStoreWrapperClass4);};q.prototype.setEnvironment=function(s,t){!(s in m)?p(0):undefined;this.$AdsAccountStoreWrapperClass1=s;this.$AdsAccountStoreWrapperClass2=t;this.$AdsAccountStoreWrapperClass5();};q.prototype.$AdsAccountStoreWrapperClass5=function(){h.setAccountID(this.getAccountID());h.setAppName(this.$AdsAccountStoreWrapperClass1);};q.prototype.canUseBMSharedAudience=function(){return o(this.getAccount().capabilities||[],j.CAN_USE_BM_SHARED_AUDIENCE);};q.prototype.canPromoteSphericalVideo=function(){return o(this.getAccount().capabilities||[],j.SPHERICAL_VIDEO_POST_PROMOTABLE);};function q(){}var r=new q();f.exports=r;},null);
__d('AdsVideoFetcher',['regeneratorRuntime','Promise','ex','AdsDaoGraph','ErrorUtils','URI'],function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';if(c.__markCompiled)c.__markCompiled();var n=['captions','creator_product','description','format','id','length','name','thumbnails','spherical','updated_time'],o={processFetchedVideo:function(p){var q=p.captions,r=p.creator_product,s=p.description,t=p.id,u=p.length,v=p.name,w=p.thumbnails,x=p.spherical;if(w){w=w.data;}else w=[];if(w.length<=0)l.reportError(new Error(j('Got no thumbnails from the API for video with ID %s',t)));var y=null;w=w.map(function(da){var ea=da.height,fa=da.is_preferred,ga=da.uri,ha=da.width;ga=new m(ga).setFragment('').toString();var ia={width:ha,height:ea,uri:ga,id:ga};if(fa)y=ia;return ia;});if(!y)y=w[0];var z=p.format.find(function(da){return da.filter==='native';}),aa=z.width,ba=z.height,ca=p.updated_time;return {captions:q,creator_product:r,description:s,height:ba,id:t,length:u,name:v,preferredThumbnail:y,spherical:x,thumbnails:w,updatedTime:ca,width:aa};},genAdAccountVideos:function p(q){var r;return h.async(function s(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return h.awrap(k.fetch.videosForAccount.promiseOne({accountId:q,fields:n}));case 2:r=t.sent;return t.abrupt('return',r.map(o.processFetchedVideo));case 4:case 'end':return t.stop();}},null,this);},genPageVideos:function p(q){var r;return h.async(function s(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return h.awrap(k.fetch.videosForPage.promiseOne({pageId:q,fields:['id']}));case 2:r=t.sent;return t.abrupt('return',i.all(r.map(function(u){return o.genSingleVideo(u.id);})));case 4:case 'end':return t.stop();}},null,this);},genSingleVideo:function p(q,r){var s;return h.async(function t(u){while(1)switch(u.prev=u.next){case 0:if(r)k.fetch.objectByFBID.clearCache();u.next=3;return h.awrap(k.fetch.objectByFBID.promiseOne({fbid:q,fields:n}));case 3:s=u.sent;return u.abrupt('return',o.processFetchedVideo(s));case 5:case 'end':return u.stop();}},null,this);},genVideoStatus:function p(q){var r;return h.async(function s(t){while(1)switch(t.prev=t.next){case 0:k.fetch.objectByFBID.clearCache();t.next=3;return h.awrap(k.fetch.objectByFBID.promiseOne({fbid:q,fields:['status']}));case 3:r=t.sent;return t.abrupt('return',r.status);case 5:case 'end':return t.stop();}},null,this);}};f.exports=o;},null);
__d('Alignment',['DOMVector','Style','containsNode','invariant'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();function l(n,o,p){'use strict';this.$Anchor1=o;this.$Anchor2=p;this.$Anchor3=n;}l.prototype.getElement=function(){'use strict';return this.$Anchor3;};l.prototype.getX=function(){'use strict';return this.$Anchor1;};l.prototype.getY=function(){'use strict';return this.$Anchor2;};l.prototype.isCorner=function(){'use strict';return ((this.$Anchor1===l.LEFT||this.$Anchor1===l.RIGHT)&&(this.$Anchor2===l.TOP||this.$Anchor2===l.BOTTOM));};l.prototype.getPosition=function(n){'use strict';return h.getElementPosition(this.$Anchor3,n).add(this.getX()*this.$Anchor3.offsetWidth,this.getY()*this.$Anchor3.offsetHeight);};Object.assign(l,{LEFT:0,CENTER:.5,RIGHT:1,TOP:0,MIDDLE:.5,BOTTOM:1});function m(n,o,p){'use strict';this.$Alignment1=n;this.$Alignment2=o;this.$Alignment3=p;!j(n.getElement(),o.getElement())?k(0):undefined;!n.isCorner()?k(0):undefined;}m.prototype.align=function(){'use strict';m.$Alignment4(this.$Alignment1,function(){return m.measure(this.$Alignment2,this.$Alignment3);}.bind(this));};m.$Alignment4=function(n,o){'use strict';var p=n.getElement();i.apply(p,{left:n.getX()===l.LEFT?'0':'',right:n.getX()===l.RIGHT?'0':'',top:n.getY()===l.TOP?'0':'',bottom:n.getY()===l.BOTTOM?'0':''});var q=o();if(n.getX()===l.LEFT){i.set(p,'left',q.x+'px');}else if(n.getX()===l.RIGHT)i.set(p,'right',-q.x+'px');if(n.getY()===l.TOP){i.set(p,'top',q.y+'px');}else if(n.getY()===l.BOTTOM)i.set(p,'bottom',-q.y+'px');};m.position=function(n,o){'use strict';m.$Alignment4(n,function(){var p=h.getElementPosition(n.getElement());return o.convertTo('document').sub(p);});};m.measure=function(n,o){'use strict';var p=n.getPosition('document'),q=o.getPosition('document');return q.sub(p);};m.Anchor=l;f.exports=m;},null);
__d('SingleSelectorBase',['ArbiterMixin','Alignment','BehaviorsMixin','Button','CSS','DOM','DOMQuery','Event','Layer','Locale','Rect','ParameterizedPopover','PopoverMenu','Scroll','SelectableMenuUtils','Style','csx','cx','getOverlayZIndex','invariant','mixin','throttle'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca){var da,ea;if(c.__markCompiled)c.__markCompiled();var fa=i.Anchor,ga=q.isRTL()?fa.RIGHT:fa.LEFT,ha=16;da=babelHelpers.inherits(ia,ba(h,j));ea=da&&da.prototype;function ia(ka,la,ma,na){'use strict';ea.constructor.call(this);this.$SingleSelectorBase1=ka;this.$SingleSelectorBase2=null;this.$SingleSelectorBase3=m.create('div',{});this.$SingleSelectorBase4=new p({classNames:["_5xew"]},this.$SingleSelectorBase3);this.$SingleSelectorBase5=new s(ka.parentNode,ka,[],babelHelpers['extends']({},ma,{layer:this.$SingleSelectorBase4}));this.$SingleSelectorBase5.subscribe('show',this.$SingleSelectorBase6.bind(this));this.$SingleSelectorBase5.subscribe('hide',this.$SingleSelectorBase7.bind(this));this.$SingleSelectorBase8=new t(this.$SingleSelectorBase5,ka,la,[]);this.setMenu(la);if(na&&na.behaviors)this.enableBehaviors(na.behaviors);}ia.prototype.$SingleSelectorBase6=function(){'use strict';this.$SingleSelectorBase9();this.$SingleSelectorBase10();l.conditionClass(this.$SingleSelectorBase4.getRoot(),"_5xex",this.$SingleSelectorBase11());w.set(this.$SingleSelectorBase4.getRoot(),'min-width',this.$SingleSelectorBase1.offsetWidth+ha+'px');var ka=m.scry(this.$SingleSelectorBase3,'div.uiScrollableAreaWrap')[0];if(ka){var la=i.measure(new fa(this.$SingleSelectorBase12(),ga,fa.MIDDLE),new fa(this.$SingleSelectorBase2.getRoot(),ga,fa.MIDDLE));u.setTop(ka,u.getTop(ka)-la.y);}this.align();this.getSelectedItem().focus();if(!this.$SingleSelectorBase13)this.$SingleSelectorBase13=o.listen(window,'resize',ca(this.align.bind(this)));this.inform('show');};ia.prototype.$SingleSelectorBase7=function(){'use strict';if(this.$SingleSelectorBase13){this.$SingleSelectorBase13.remove();this.$SingleSelectorBase13=null;}this.inform('hide');};ia.prototype.$SingleSelectorBase14=function(ka,la){'use strict';this.$SingleSelectorBase15=null;if(!this.$SingleSelectorBase16)this.inform('change',la);};ia.prototype.isShown=function(){'use strict';return this.$SingleSelectorBase5.isShown();};ia.prototype.setValue=function(ka){'use strict';if(this.isShown()){this.$SingleSelectorBase17(ka,false);}else{this.$SingleSelectorBase18=ka;this.$SingleSelectorBase19=false;}};ia.prototype.setValueWithoutChange=function(ka){'use strict';if(this.isShown()){this.$SingleSelectorBase17(ka,true);}else{this.$SingleSelectorBase18=ka;this.$SingleSelectorBase19=true;}};ia.prototype.$SingleSelectorBase10=function(){'use strict';if(this.$SingleSelectorBase18){this.$SingleSelectorBase17(this.$SingleSelectorBase18,this.$SingleSelectorBase19);this.$SingleSelectorBase18=null;}};ia.prototype.$SingleSelectorBase17=function(ka,la){'use strict';this.$SingleSelectorBase16=la;this.$SingleSelectorBase2.setValue(ka);this.$SingleSelectorBase16=null;};ia.prototype.getValue=function(){'use strict';return this.getSelectedItem().getValue();};ia.prototype.getLayer=function(){'use strict';return this.$SingleSelectorBase4;};ia.prototype.getButton=function(){'use strict';return this.$SingleSelectorBase1;};ia.prototype.setMenu=function(ka){'use strict';if(this.isShown()){this.$SingleSelectorBase20(ka);}else this.$SingleSelectorBase21=ka;};ia.prototype.$SingleSelectorBase9=function(){'use strict';if(this.$SingleSelectorBase21){this.$SingleSelectorBase20(this.$SingleSelectorBase21);this.$SingleSelectorBase21=null;}};ia.prototype.$SingleSelectorBase20=function(ka){'use strict';if(ka!==this.$SingleSelectorBase2){this.$SingleSelectorBase2=ka;if(this.$SingleSelectorBase22)this.$SingleSelectorBase22.unsubscribe();this.$SingleSelectorBase22=this.$SingleSelectorBase2.subscribe('change',this.$SingleSelectorBase14.bind(this));m.setContent(this.$SingleSelectorBase3,ka.getRoot());this.$SingleSelectorBase8.setMenu(ka);this.$SingleSelectorBase15=null;}};ia.prototype.getMenu=function(){'use strict';return this.$SingleSelectorBase21||this.$SingleSelectorBase2;};ia.prototype.enable=function(){'use strict';k.setEnabled(this.$SingleSelectorBase1,true);this.$SingleSelectorBase5.enable();};ia.prototype.disable=function(){'use strict';k.setEnabled(this.$SingleSelectorBase1,false);this.$SingleSelectorBase5.disable();};ia.prototype.$SingleSelectorBase11=function(){'use strict';return (w.isFixed(this.$SingleSelectorBase1)&&!w.isFixed(this.$SingleSelectorBase4.getRoot().parentNode));};ia.prototype.align=function(){'use strict';if(!this.$SingleSelectorBase15)this.$SingleSelectorBase15=this.getAlignment();this.$SingleSelectorBase15.align();var ka=r.getElementBounds(this.$SingleSelectorBase2.getRoot()),la=r.getViewportWithoutScrollbarsBounds(),ma=ka.t-la.t,na=la.b-ka.b,oa=ka.l-la.l,pa=la.r-ka.r,qa=this.$SingleSelectorBase4.getRoot();if(ma<10){ja(qa,'top',-ma+10);}else if(na<10)ja(qa,'top',na-10);if(oa<10){ja(qa,'left',-oa+10);}else if(pa<10)ja(qa,'left',pa-10);var ra=z(this.$SingleSelectorBase1,this.$SingleSelectorBase4.getInsertParent());w.set(this.$SingleSelectorBase4.getRoot(),'z-index',ra>200?ra:'');};ia.prototype.getAlignment=function(){'use strict';return new i(new fa(this.$SingleSelectorBase4.getRoot(),fa.TOP,fa.LEFT),new fa(this.$SingleSelectorBase12(),ga,fa.MIDDLE),new fa(this.$SingleSelectorBase23(),ga,fa.MIDDLE));};ia.prototype.$SingleSelectorBase23=function(){'use strict';return n.find(this.$SingleSelectorBase1,"._55pe");};ia.prototype.getSelectedItem=function(){'use strict';var ka=null;if(this.$SingleSelectorBase18){this.getMenu().forEachItem(function(la){if(la.getValue()===this.$SingleSelectorBase18){!(ka===null)?aa(0):undefined;ka=la;}}.bind(this));}else this.getMenu().forEachItem(function(la){if(v.isSelected(la)){!(ka===null)?aa(0):undefined;ka=la;}});!(ka!==null)?aa(0):undefined;return ka;};ia.prototype.$SingleSelectorBase12=function(){'use strict';return n.find(this.getSelectedItem().getRoot(),"._54nh");};ia.prototype.destroy=function(){'use strict';this.$SingleSelectorBase2&&this.$SingleSelectorBase2.destroy();this.$SingleSelectorBase5.destroy();this.$SingleSelectorBase4.destroy();};function ja(ka,la,ma){w.set(ka,la,w.getFloat(ka,la)+ma+'px');}f.exports=ia;},null);
__d('XUISingleSelector.react',['Image.react','InlineBlock.react','React','ReactDOM','ReactSelectorUtils','ReactXUIMenu','SingleSelectorBase','SubscriptionsHandler','XUIPopoverButton.react','areEqual','cloneWithProps_DEPRECATED','ix'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){if(c.__markCompiled)c.__markCompiled();var t=j.PropTypes,u=m.SelectableMenu,v=m.SelectableItem,w=j.createClass({displayName:'XUISingleSelectorButton',render:function(){return (j.createElement(p,babelHelpers['extends']({},this.props,{chevron:j.createElement(h,{src:s('/images/ui/x/selector/chevron.png')})})));}}),x=j.createClass({displayName:'XUISingleSelector',propTypes:{name:t.string,maxheight:t.number,maxwidth:t.number,defaultValue:t.string,disabled:t.bool,size:t.oneOf(['small','medium','large','xlarge','xxlarge']),suppressed:t.bool,value:t.any,onChange:t.func,onShow:t.func,onHide:t.func,behaviors:t.array},_menu:null,_singleSelector:null,_subscriptions:null,flattenMenuItems:function(){var y=[];j.Children.forEach(this.props.children,function(z){if(z)y.push(z);});return y;},processMenuItems:function(){return l.processMenuItems(this.flattenMenuItems(),this.getValue());},setMenuValue:function(y){this._singleSelector.setValueWithoutChange(y);},getDefaultProps:function(){return {disabled:false,size:'medium'};},getInitialState:function(){return {value:this.props.value!==undefined?this.props.value:this.props.defaultValue!==undefined?this.props.defaultValue:this.flattenMenuItems()[0].props.value};},componentWillReceiveProps:function(){if(this.props.value!==undefined)this.setState({value:this.props.value});},componentDidMount:function(){var y=k.findDOMNode(this.refs.button);this._singleSelector=new n(y,this._createMenu(),{disabled:this.props.disabled},{behaviors:this.props.behaviors});this._subscriptions=new o();this._subscriptions.addSubscriptions(this._singleSelector.subscribe('change',this.onChange));if(this.props.onShow)this._subscriptions.addSubscriptions(this._singleSelector.subscribe('show',this.props.onShow));if(this.props.onHide)this._subscriptions.addSubscriptions(this._singleSelector.subscribe('hide',this.props.onHide));},componentDidUpdate:function(y){if(!q(y.children,this.props.children))this._singleSelector.setMenu(this._createMenu());if(y.disabled!==this.props.disabled)if(!this.props.disabled){this._singleSelector.enable();}else this._singleSelector.disable();this.setMenuValue(this.getValue());},componentWillUnmount:function(){this._singleSelector.destroy();if(this._subscriptions){this._subscriptions.release();this._subscriptions=null;}},getValue:function(){return this.props.value!==undefined?this.props.value:this.state.value;},onChange:function(y,z){if(this.props.value===undefined){this.setState({value:z.value});}else this.setMenuValue(this.props.value);if(this.props.onChange)this.props.onChange(z);},_createMenu:function(){var y=j.createElement(u,{maxheight:this.props.maxheight},this.processMenuItems().items);return new y.type(y.props);},render:function(){var y=this.processMenuItems().selectedItem,z;if(y.props.icon)z=r(y.props.icon,{});return (j.createElement(i,babelHelpers['extends']({},this.props,{alignv:'middle'}),j.createElement('input',{type:'hidden',autoComplete:'off',name:this.props.name,value:y.props.value}),j.createElement(w,{disabled:this.props.disabled,image:z,label:y.props.label||y.props.children,maxwidth:this.props.maxwidth,ref:'button',size:this.props.size,suppressed:this.props.suppressed})));}});x.Option=v;f.exports=x;},null);
__d('AdsCurrencyFormatter',['Currency','NumberFormatConfig','intlNumUtils'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();function k(ea){return Math.round(Math.log(ea)/Math.LN10);}function l(ea,fa,ga){var ha=h.getFormat(ea)||'{symbol}{amount}',ia=h.getSymbol(ea)||'',ja=ha.replace('{symbol}',ia).replace('{amount}',fa);if(ga)return ja+' '+h.getISO(ea);return ja;}function m(ea,fa,ga){var ha=h.getOffset(ea)||100,ia=k(ha);return j.formatNumberRaw(fa/ha,ia,ga?i.numberDelimiter:'',i.decimalSeparator,i.minDigitsForThousandsSeparator);}function n(ea,fa,ga,ha){var ia=m(ea,fa,ha);return l(ea,ia,ga);}function o(ea,fa){return n(ea,fa);}function p(ea,fa){return m(ea,fa);}function q(ea,fa){return n(ea,fa,true);}function r(ea,fa){return n(ea,fa,false,true);}function s(ea,fa){var ga=h.getOffset(ea)||100,ha=k(ga);while(fa!==0&&Math.round(Math.abs(fa)*Math.pow(10,ha)/ga)<1)ha++;var ia=j.formatNumberRaw(fa/ga,ha,i.numberDelimiter,i.decimalSeparator,i.minDigitsForThousandsSeparator);return l(ea,ia,false);}function t(ea,fa,ga){var ha=h.getOffset(ea)||100,ia=k(ha);if(ia&&fa%ha===0)ia=0;var ja=j.formatNumberRaw(fa/ha,ia,ga?i.numberDelimiter:'',i.decimalSeparator);return l(ea,ja,false);}function u(ea,fa,ga){return x(o(ea,fa),o(ea,ga));}function v(ea,fa,ga,ha){if(ha-ga<fa){return o(ea,ha);}else return u(ea,ga,ha);}var w='\u2013';function x(ea,fa){return ea+w+fa;}function y(ea,fa,ga){return z(ea,fa,ga)||0;}function z(ea,fa,ga){var ha=h.getOffset(ea),ia=j.parseNumberRaw(fa,ga,i.numberDelimiter);if(ia==null)return null;return Math.round(ia*ha);}function aa(ea,fa){var ga=h.getOffset(ea),ha=k(ga),ia=j.parseNumber(fa)||0;return +ia.toFixed(ha);}function ba(ea,fa,ga){var ha=ga||i.decimalSeparator;return y(ea,fa,ha);}function ca(ea,fa,ga){var ha=ga||i.decimalSeparator;return z(ea,fa,ha);}function da(ea,fa,ga,ha){return n(ea,fa,ga,ha);}f.exports={formatCurrency:o,formatCurrencyAtLeastOneSigFig:s,formatCurrencyFullFormat:da,formatCurrencyNoSymbol:p,formatCurrencyRange:u,formatCurrencyRangeWithThreshold:v,formatCurrencyWithISO:q,formatCurrencyWithNumberDelimiters:r,formatCurrencyWithOptionalDecimals:t,formatRange:x,parseCurrency:ba,parseOptionalCurrency:ca,parsePECurrency:aa};},null);
__d('Bandicoot',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=5*1000,i=10*60*1000,j=14*24*60*60*1000,k='Bandicoot:',l={ACTIVE:'ACTIVE',INACTIVE:'INACTIVE',CLOSED:'CLOSED'};function m(){try{var q=window.localStorage;if(q){var r='__test'+Date.now();q.setItem(r,'');q.removeItem(r);}return q;}catch(p){}}var n=m();function o(p){this.$Bandicoot1=k+p;this.$Bandicoot2={};this.$Bandicoot5=this.$Bandicoot6.bind(this);this.sessionID=null;this.sessionStartTime=null;this.storage=n;}o.prototype.getCrashTimeData=function(){var p=window.performance&&window.performance.memory||{},q=this.sessionStartTime;return {duration:q?Date.now()-q:0,tabs:Object.keys(this.$Bandicoot7()).length,jsHeapSizeLimit:p.jsHeapSizeLimit,totalJSHeapSize:p.totalJSHeapSize,usedJSHeapSize:p.usedJSHeapSize,elementsInDOM:document.getElementsByTagName('*').length,uri:window.location.href};};o.prototype.getLogTimeData=function(){return {userAgent:window.navigator.userAgent};};o.prototype.logCrash=function(p,q,r){var s=Object.assign({sessionID:p},q,r);};o.prototype.logBrowserUnsupported=function(){};o.prototype.logTrackingError=function(){};o.prototype.startSession=function(){if(!this.storage){this.logBrowserUnsupported();return;}if(this.$Bandicoot3)return;if(!this.sessionID)this.sessionID=Math.random().toString(36).slice(2,9);if(!this.sessionStartTime)this.sessionStartTime=Date.now();this.$Bandicoot3=setInterval(this.$Bandicoot8.bind(this),h);this.$Bandicoot8();if(document.addEventListener)document.addEventListener('visibilitychange',this.$Bandicoot5);this.$Bandicoot9();};o.prototype.endSession=function(){if(!this.storage)return;if(!this.$Bandicoot3)return;clearInterval(this.$Bandicoot3);this.$Bandicoot3=null;this.$Bandicoot10({status:l.CLOSED});this.sessionID=null;this.sessionStartTime=null;if(document.removeEventListener)document.removeEventListener('visibilitychange',this.$Bandicoot5);};o.prototype.logKnownCrashes=function(){if(!this.$Bandicoot3)this.$Bandicoot8();};o.prototype.$Bandicoot8=function(){var p=this.$Bandicoot7(),q={};if(this.$Bandicoot3){if(!p[this.sessionID])p[this.sessionID]={};Object.assign(p[this.sessionID],this.getCrashTimeData(),{lastUpdated:Date.now(),status:this.$Bandicoot11()});}Object.keys(p).forEach(function(r){var s=p[r];if(s.status===l.CLOSED)return;if(this.$Bandicoot2[r])return;if(!s.lastUpdated)return;var t=Date.now()-s.lastUpdated;if(s.status===l.INACTIVE&&t>i)return;if(s.status===l.ACTIVE&&t>i){if(!s.loggerTabForPotentialCrash&&this.$Bandicoot3){s.loggerTabForPotentialCrash=this.sessionID;q[r]=s;}else if(s.loggerTabForPotentialCrash&&s.loggerTabForPotentialCrash!==this.sessionID){if(t>j)return;q[r]=s;}else{this.logCrash(r,s,this.getLogTimeData());this.$Bandicoot2[r]=true;}}else{delete s.loggerTabForPotentialCrash;q[r]=s;}}.bind(this));this.$Bandicoot12(q);};o.prototype.$Bandicoot7=function(p){p=p||this.$Bandicoot1;var q=this.storage.getItem(p)||'{}';try{q=JSON.parse(q);}catch(r){q={};this.storage.removeItem(p);}return q;};o.prototype.$Bandicoot10=function(p){p.lastUpdated=Date.now();var q=this.$Bandicoot7();if(!q[this.sessionID])q[this.sessionID]={};Object.assign(q[this.sessionID],p);this.$Bandicoot12(q);};o.prototype.$Bandicoot12=function(p){var q=JSON.stringify(p);try{this.storage.setItem(this.$Bandicoot1,q);}catch(r){var s=this.$Bandicoot4,t=Date.now();if(!s||t>s+h){this.logTrackingError();this.$Bandicoot4=t;}this.storage.removeItem(this.$Bandicoot1);}};o.prototype.$Bandicoot9=function(){for(var p=0;p<this.storage.length;++p){var q=this.storage.key(p);if(q.indexOf(k)===0&&q!==this.$Bandicoot1){var r=this.$Bandicoot7(q),s=Object.keys(r).every(function(t){var u=r[t];return (!u.lastUpdated||Date.now()-u.lastUpdated>j);});if(s)this.storage.removeItem(q);}}};o.prototype.$Bandicoot6=function(){this.$Bandicoot10({status:this.$Bandicoot11()});};o.prototype.$Bandicoot11=function(){return document.hidden?l.INACTIVE:l.ACTIVE;};f.exports=o;},null);
__d('LFUCache',['Cache','DateConsts'],function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();var l=15,m=1;j=babelHelpers.inherits(n,h);k=j&&j.prototype;function n(o,p){k.constructor.call(this);this.$LFUCache2=o&&o>0?o:l;this.$LFUCache3=p&&p>0?p:m;this.$LFUCache4();}n.prototype.$LFUCache4=function(){clearTimeout(this.$LFUCache1);this.$LFUCache1=setTimeout(this.purge.bind(this),this.$LFUCache2*i.SEC_PER_MIN*i.MS_PER_SEC);};n.prototype.destroy=function(){clearTimeout(this.$LFUCache1);};n.prototype.get=function(o,p){if(this.has(o))this.$LFUCache5(o);return k.get.call(this,o,p);};n.prototype.set=function(o,p,q,r){var s=this.has(o),t=k.set.call(this,o,p,q,r);if(t)if(s){this.$LFUCache5(o);}else this.$LFUCache6(o,this.$LFUCache3);return t;};n.prototype.purge=function(){var o=Array.from(this.__keys());o.forEach(function(p){if(this.$LFUCache7(p)<this.$LFUCache3){this['delete'](p);}else this.$LFUCache6(p,0);}.bind(this));this.$LFUCache4();};n.prototype.$LFUCache5=function(o){var p=this.$LFUCache7(o)+1;this.$LFUCache6(o,p);return p;};n.prototype.$LFUCache7=function(o){var p=this.__getRaw(o);return p&&p.$LFUCache8?p.$LFUCache8:0;};n.prototype.$LFUCache6=function(o,p){var q=this.__getRaw(o);if(!q)q=this.__getNewRawObject();q.$LFUCache8=p;this.__setRaw(o,q);return true;};f.exports=n;},null);
__d('Network',['mixInEventEmitter'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=true,j=b.navigator.connection,k={0:'unknown',1:'ethernet',2:'wifi',3:'2g',4:'3g'};function l(){return i;}function m(r){if(r==i)return;i=r;q.emit(r?'online':'offline');}function n(){return j?j.bandwidth:i?Infinity:0;}function o(){return j?j.metered:false;}function p(){var r=j?String(j.type):'0';return k[r]||r;}var q={getBandwidth:n,getType:p,isMetered:o,isOnline:l,setOnline:m};h(q,{online:true,offline:true});if(b.addEventListener){b.addEventListener('online',m.bind(null,true));b.addEventListener('offline',m.bind(null,false));}else if(b.attachEvent){b.attachEvent('online',m.bind(null,true));b.attachEvent('offline',m.bind(null,false));}f.exports=q;},null);
__d('FileHasher',['WebWorker','fileSliceName','emptyFunction','FileHashWorkerResource'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();k.isSupported=function(){'use strict';return h.isSupported();};function k(){'use strict';var l=c('FileHashWorkerResource');h.prepareResource(l);this.$FileHasher1=new h(l).setMessageHandler(function(m){this.$FileHasher2(m);}.bind(this)).execute();}k.prototype.hash=function(l,m){'use strict';this.$FileHasher2=m;this.$FileHasher1.postMessage({file:l,fileSliceName:i});return this;};k.prototype.destroy=function(){'use strict';this.$FileHasher2=j;this.$FileHasher1.terminate();};f.exports=k;},null);
__d('FluxMixinLegacy',['FluxStoreGroup','SubscriptionsHandler','invariant'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();function k(m){var n=arguments.length<=1||arguments[1]===undefined?{withProps:false}:arguments[1];m=m.filter(function(o){return !!o;});return {getInitialState:function(){l(this);return n.withProps?this.constructor.calculateState(null,this.props):this.constructor.calculateState(null,undefined);},componentWillMount:function(){var o,p=false,q=function(){p=true;};this._fluxMixinSubscriptionsHandler=new i();var r=m.map(function(t){return t.addListener(q);});(o=this._fluxMixinSubscriptionsHandler).addSubscriptions.apply(o,r);var s=function(){if(p)this.setState(function(t){return n.withProps?this.constructor.calculateState(t,this.props):this.constructor.calculateState(t,undefined);}.bind(this));p=false;}.bind(this);this._fluxMixinStoreGroup=new h(m,s);},componentWillReceiveProps:function(o,p){if(!n.withProps)return;this.setState(function(q){return this.constructor.calculateState(q,o);}.bind(this));},componentWillUnmount:function(){this._fluxMixinStoreGroup.release();this._fluxMixinSubscriptionsHandler.release();}};}function l(m){!m.constructor.calculateState?j(0):undefined;}f.exports=k;},null);
__d('naturalComparator',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h='0'.charCodeAt(0),i='9'.charCodeAt(0),j=function(n){return n===null||n===undefined||n==='';},k=function(n){return n>=h&&n<=i;},l=function(n){var o=[],p='';for(var q=0;q<n.length;q++)if(p.length){if(k(p.charCodeAt(0))===k(n.charCodeAt(q))){p=p+n.charAt(q);}else{o.push(p);p=n.charAt(q);}}else p=p+n.charAt(q);if(p.length)o.push(p);return o;},m=function(n,o){if(j(n)&&j(o)){return 0;}else if(j(n)){return 1;}else if(j(o))return -1;var p=l(n),q=l(o),r=0,s=0;while(r<p.length&&s<q.length){var t=k(p[r].charCodeAt(0)),u=k(q[s].charCodeAt(0)),v;if(t&&u){v=parseInt(p[r],10)-parseInt(q[s],10);}else v=p[r].localeCompare(q[s]);if(v!==0)return v;r++;s++;}if(r===p.length){return -1;}else if(s===q.length){return 1;}else return 0;};f.exports=m;},null);
__d('VideoUploadLogger',['Banzai'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(j){this._source=j.source;this._waterfallID=j.waterfall_id;this._targetID=j.target_id;this._delay=j.delay;this._times=[];this._isChunkedUpload=j.is_chunked_upload;this._actorID=j.actor_id;this._composerEntryPointRef=j.composer_entry_point_ref;}Object.assign(i,{BANZAI_GK:'videos',BANZAI_ROUTE:'video_waterfall',SOURCE_SIMPLE:'simple',SOURCE_COMPOSER:'composer',EVENT_STARTED_GENERATE_THUMBNAILS:'upload.client.started_generate_thumbnails',EVENT_FINISHED_GENERATE_THUMBNAILS:'upload.client.finished_generate_thumbnails',EVENT_SELECTED_CUSTOM_THUMBNAIL:'upload.client.selected_custom_thumbnail',EVENT_VIDEO_DIMENSIONS_UNREADABLE:'upload.client.video_dimensions_unreadable',EVENT_REPLACE_VIDEO:'upload.client.replace_video',EVENT_STARTED_FLOW:'upload.client.started_flow',EVENT_FINISHED_FLOW:'upload.client.finished_flow',EVENT_FAILED_FLOW:'upload.client.failed_flow',EVENT_CANCELED_FLOW:'upload.client.canceled_flow',EVENT_RESIGNED_FLOW:'upload.client.resigned_flow',EVENT_REQUESTED_UPLOADING:'upload.client.requested_uploading',EVENT_INVALIDATED_UPLOADING:'upload.client.invalidated_uploading',EVENT_STARTED_UPLOADING:'upload.client.started_uploading',EVENT_PROGRESS_UPLOADING_START_REQUEST:'upload.client.progress_uploading_start_request',EVENT_FINISHED_UPLOADING:'upload.client.finished_uploading',EVENT_CANCELED_UPLOADING:'upload.client.canceled_uploading',EVENT_ABANDONED_UPLOADING:'upload.client.abandoned_uploading',EVENT_FAILED_UPLOADING:'upload.client.failed_uploading',EVENT_STARTED_SENDING_BYTES:'upload.client.started_sending_bytes',EVENT_FINISHED_SENDING_BYTES:'upload.client.finished_sending_bytes',EVENT_CANCELED_SENDING_BYTES:'upload.client.canceled_sending_bytes',EVENT_FAILED_SENDING_BYTES:'upload.client.failed_sending_bytes',EVENT_STARTED_START_REQUEST:'upload.client.started_sending_start_request',EVENT_FINISHED_START_REQUEST:'upload.client.finished_sending_start_request',EVENT_FAILED_START_REQUEST:'upload.client.failed_sending_start_request',EVENT_STARTED_POST_REQUEST:'upload.client.started_sending_post_request',EVENT_FINISHED_POST_REQUEST:'upload.client.finished_sending_post_request',EVENT_FAILED_POST_REQUEST:'upload.client.failed_sending_post_request',EVENT_STARTED_SENDING_CHUNK_BYTES:'upload.client.started_sending_chunk_bytes',EVENT_FINISHED_SENDING_CHUNK_BYTES:'upload.client.finished_sending_chunk_bytes',EVENT_CANCELED_SENDING_CHUNK_BYTES:'upload.client.canceled_sending_chunk_bytes',EVENT_FAILED_SENDING_CHUNK_BYTES:'upload.client.failed_sending_chunk_bytes',EVENT_TIMEOUT_SENDING_CHUNK_BYTES:'upload.client.timeout_sending_chunk_bytes',EVENT_ENCODING_START_OBSERVED:'encode.client.encoding_start_observed',EVENT_ENCODING_SUCCESS_OBSERVED:'encode.client.encoding_success_observed',EVENT_ENCODING_FAIL_OBSERVED:'encode.client.encoding_fail_observed',EVENT_RECEIVED_RESPONSE:'upload.client.received_response'});Object.assign(i.prototype,{logEvent:function(event,j){var k=babelHelpers['extends']({},j);if(k.elapsed_time==null)if(event.indexOf('started')!==-1){this._times[event]=Date.now();}else if(event.indexOf('finished')!==-1){k.elapsed_time=this._computeElapsedTime(event,'finished');}else if(event.indexOf('canceled')!==-1){k.elapsed_time=this._computeElapsedTime(event,'canceled');}else if(event.indexOf('failed')!==-1)k.elapsed_time=this._computeElapsedTime(event,'failed');k.event=event;k.source=this._source;k.waterfall_id=this._waterfallID;k.target_id=this._targetID;k.is_chunked_upload=this._isChunkedUpload;k.actor_id=this._actorID;k.composer_entry_point_ref=this._composerEntryPointRef;h.post(i.BANZAI_ROUTE,k,{delay:this._delay});},_computeElapsedTime:function(event,j){var k=event.replace(j,'started'),l=this._times[k];return l?Date.now()-l:null;}});f.exports=i;},null);
__d('VideoUploadCrashMonitor',['Bandicoot','VideoUploadLogger'],function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();j=babelHelpers.inherits(l,h);k=j&&j.prototype;function l(m,n,o,p,q,r,s,t){'use strict';k.constructor.call(this,'VideoUploadSession');this.$VideoUploadCrashMonitor1={waterfallID:m,actorID:n,source:o,targetID:p,loggingDelay:q,supportsChunking:r,composerEntryPointRef:s,flowStarted:t};}l.prototype.flowStarted=function(){'use strict';this.$VideoUploadCrashMonitor1.flowStarted=true;};l.prototype.getCrashTimeData=function(){'use strict';return this.$VideoUploadCrashMonitor1;};l.prototype.logCrash=function(m,n,o){'use strict';if(!n.waterfallID)return;var p=new i({actor_id:n.actorID,source:n.source,waterfall_id:n.waterfallID,target_id:n.targetID,delay:n.loggingDelay,is_chunked_upload:n.supportsChunking,composer_entry_point_ref:n.composerEntryPointRef}),q={error:'Crash Detected',error_description:'Detected video upload did not complete due to a crash'};p.logEvent(i.EVENT_FAILED_UPLOADING,q);if(n.flowStarted)p.logEvent(i.EVENT_RESIGNED_FLOW,{});};f.exports=l;},null);
__d('VideoUploadFileValidator',['ErrorDialog','JSXDOM','fbt','errorCode'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=[1363019,1363020,1363021,1363022,1363023,1363024,1363025,1363026,1363027,1363030,1363031,1363032,1363033,1363038,1363039,1363040,1363048];function m(n){'use strict';this.$VideoUploadFileValidator1=n;}m.prototype.validate=function(n,o){'use strict';return this.$VideoUploadFileValidator2(n)&&this.$VideoUploadFileValidator3(n)&&this.$VideoUploadFileValidator4(o);};m.prototype.getValidationErrorMessage=function(n,o){'use strict';return this.$VideoUploadFileValidator5(n)||this.$VideoUploadFileValidator6(n)||this.$VideoUploadFileValidator7(o);};m.canReplaceVideoForError=function(n){'use strict';if(!n)return true;if(l.indexOf(n)>-1)return true;return false;};m.prototype.$VideoUploadFileValidator2=function(n){'use strict';var o=this.$VideoUploadFileValidator5(n);if(o){h.show(o.summary,o.description);return false;}else return true;};m.prototype.$VideoUploadFileValidator5=function(n){'use strict';if(this.$VideoUploadFileValidator1.extensions[n.getExtension()])return;var o="http://www.facebook.com/help/"+"?faq=218673814818907#What-formats-of-video-files-can-I-upload?",p=i.a({href:o},j._("recommended formats"));return {summary:j._("Unsupported File Format"),description:j._("Sorry, the file you selected is in a format that we don't support. Please use one of our {link} for video files.",[j.param('link',p)])};};m.prototype.$VideoUploadFileValidator3=function(n){'use strict';var o=this.$VideoUploadFileValidator6(n);if(o){h.show(o.summary,o.description);return false;}else return true;};m.prototype.$VideoUploadFileValidator6=function(n){'use strict';var o;if(n.getSize()===null)return;if(n.getSize()<this.$VideoUploadFileValidator1.minSize)o=this.$VideoUploadFileValidator8();if(n.getSize()>this.$VideoUploadFileValidator1.maxSize)o=this.$VideoUploadFileValidator9();return o;};m.prototype.$VideoUploadFileValidator8=function(){'use strict';var n=i.strong(null,j._("{kilobytes} KB",[j.param('kilobytes',Math.round(this.$VideoUploadFileValidator1.minSize/1024))]));return {summary:j._("Video File Too Small"),description:j._("The video file you tried to upload is too small. The minimum size for a video file is {min-size}. Please try again with a larger file.",[j.param('min-size',n)])};};m.prototype.$VideoUploadFileValidator9=function(){'use strict';var n=i.strong(null,j._("{max-size} MB",[j.param('max-size',Math.round(this.$VideoUploadFileValidator1.maxSize/1024/1024))]));return {summary:j._("Video File Too Large"),description:j._("The video file you tried to upload is too large. The maximum size for a video file is {max-size}. Please try again with a smaller file.",[j.param('max-size',n)])};};m.prototype.$VideoUploadFileValidator4=function(n){'use strict';var o=this.$VideoUploadFileValidator7(n);if(o){h.show(o.summary,o.description);return false;}else return true;};m.prototype.$VideoUploadFileValidator7=function(n){'use strict';var o;if(!n)return;var p=n.format.duration;if(p<this.$VideoUploadFileValidator1.minLength)o=this.$VideoUploadFileValidator10();if(!n.streams.primaryVideo&&n.streams.primaryAudio)o=this.$VideoUploadFileValidator11();if(n.streams.primaryVideo.width<this.$VideoUploadFileValidator1.minWidth)o=this.$VideoUploadFileValidator12();if(n.streams.primaryVideo.height<this.$VideoUploadFileValidator1.minHeight)o=this.$VideoUploadFileValidator13();return o;};m.prototype.$VideoUploadFileValidator14=function(){'use strict';return {summary:j._("Video Duration Too Long"),description:j._("The duration of the video you tried to upload is too long. The maximum duration for a video is {max-length} minutes. Please upload a shorter video.",[j.param('max-length',Math.round(this.$VideoUploadFileValidator1.maxLength/60))])};};m.prototype.$VideoUploadFileValidator10=function(){'use strict';return {summary:j._("Video File Too Short"),description:j._({"second":"The duration of the video you tried to upload is too short. The minimum length for a video is {min-length} second. Please upload a longer video.","seconds":"The duration of the video you tried to upload is too short. The minimum length for a video is {min-length} seconds. Please upload a longer video."},[j.param('min-length',this.$VideoUploadFileValidator1.minLength),j['enum'](this.$VideoUploadFileValidator1.minLength===1?'second':'seconds',{second:'second',seconds:'seconds'})])};};m.prototype.$VideoUploadFileValidator11=function(){'use strict';var n="http://www.facebook.com/help/"+"?faq=218673814818907#What-formats-of-video-files-can-I-upload?",o=i.a({href:n},j._("supported video format"));return {summary:j._("No Video Detected"),description:j._("It looks like you're trying to upload a file that isn't a video. Please try uploading a {supported-video-format link}",[j.param('supported-video-format link',o)])};};m.prototype.$VideoUploadFileValidator12=function(){'use strict';return {summary:j._("Video Width Too Narrow"),description:j._("The width of the video you tried to upload is too short. The minimum width for a video is {min-width}. Please upload a wider video.",[j.param('min-width',this.$VideoUploadFileValidator1.minWidth)])};};m.prototype.$VideoUploadFileValidator13=function(){'use strict';return {summary:j._("Video Height Too Short"),description:j._("The height of the video you tried to upload is too short. The minimum height for a video is {min-height}. Please upload a taller video.",[j.param('min-height',this.$VideoUploadFileValidator1.minHeight)])};};f.exports=m;},null);
__d('VideoUploadRequest',['AsyncRequest','DOM','DTSG','FileForm','Form','PHPQuerySerializer','VideoUploadFeatureDetector','emptyFunction','flattenPHPQueryData','submitForm'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r='video';function s(t){'use strict';this.$VideoUploadRequest1=t;this.$VideoUploadRequest2=null;this.$VideoUploadRequest3=false;this.$VideoUploadRequest4=null;this.$VideoUploadRequest5=null;this.$VideoUploadRequest6=null;this.$VideoUploadRequest7=o;this.$VideoUploadRequest8=o;this.$VideoUploadRequest9=o;this.$VideoUploadRequest10=o;this.$VideoUploadRequest11=null;}s.prototype.setAllowCrossOrigin=function(t){'use strict';this.$VideoUploadRequest3=t;return this;};s.prototype.setData=function(t){'use strict';this.$VideoUploadRequest4=t;return this;};s.prototype.setWaterfallID=function(t){'use strict';this.$VideoUploadRequest5=t;return this;};s.prototype.setSuccessHandler=function(t){'use strict';this.$VideoUploadRequest7=t;return this;};s.prototype.setErrorHandler=function(t){'use strict';this.$VideoUploadRequest8=t;return this;};s.prototype.setTransportErrorHandler=function(t){'use strict';this.$VideoUploadRequest9=t;return this;};s.prototype.setUploadProgressHandler=function(t){'use strict';this.$VideoUploadRequest10=t;return this;};s.prototype.setTimeoutHandler=function(t,u){'use strict';this.$VideoUploadRequest6=t;this.$VideoUploadRequest11=u;return this;};s.prototype.setThumbnail=function(t){'use strict';this.$VideoUploadRequest12=t;return this;};s.prototype.setCaptions=function(t){'use strict';this.$VideoUploadRequest13=t;return this;};s.prototype.send=function(){'use strict';if(this.$VideoUploadRequest2)throw new Error('An upload request is already in progress.');if(n.supportsXHR()){this.$VideoUploadRequest2=this.$VideoUploadRequest14();if(this.$VideoUploadRequest12||this.$VideoUploadRequest13){var t=new FormData();if(this.$VideoUploadRequest12)t.append('thumb',this.$VideoUploadRequest12);if(this.$VideoUploadRequest13)this.$VideoUploadRequest13.forEach(function(v,w){var x=v.getIsDefault()?'captions_default':'captions_file'+w;t.append(x,v.getFile());});if(this.$VideoUploadRequest4){var u=p(this.$VideoUploadRequest4);Object.keys(u).forEach(function(v){t.append(v,u[v]);});}this.$VideoUploadRequest2.setRawData(t);}this.$VideoUploadRequest2.send();}else{this.$VideoUploadRequest2=this.$VideoUploadRequest15();this.$VideoUploadRequest16(this.$VideoUploadRequest2);}};s.prototype.sendChunk=function(t){'use strict';if(this.$VideoUploadRequest2)throw new Error('An upload request is already in progress.');var u=new FormData();u.append('video_file_chunk',t);this.$VideoUploadRequest2=this.$VideoUploadRequest14();this.$VideoUploadRequest2.setRawData(u);this.$VideoUploadRequest2.send();};s.prototype.sendFile=function(t){'use strict';if(this.$VideoUploadRequest2)throw new Error('An upload request is already in progress.');this.$VideoUploadRequest2=this.$VideoUploadRequest15();var u=t.cloneNode(false);t.name=r;i.replace(t,u);i.appendContent(this.$VideoUploadRequest2.getRoot(),t);this.$VideoUploadRequest16(this.$VideoUploadRequest2);t.name=u.name;i.replace(u,t);};s.prototype.abort=function(){'use strict';if(!this.$VideoUploadRequest2)throw new Error('There is no upload request in progress.');this.$VideoUploadRequest2.abort();this.$VideoUploadRequest2=null;};s.prototype.$VideoUploadRequest14=function(){'use strict';var t=this.__getAsyncRequest().setAllowCrossOrigin(this.$VideoUploadRequest3).setURI(this.$VideoUploadRequest1).setData(this.$VideoUploadRequest4).setRequestHeader('X_FB_VIDEO_WATERFALL_ID',this.$VideoUploadRequest5).setHandler(this.$VideoUploadRequest7).setErrorHandler(this.$VideoUploadRequest8).setTransportErrorHandler(this.$VideoUploadRequest9).setUploadProgressHandler(this.$VideoUploadRequest10);if(this.$VideoUploadRequest11)t.setTimeoutHandler(this.$VideoUploadRequest6,this.$VideoUploadRequest11);return t;};s.prototype.__getAsyncRequest=function(){'use strict';return new h();};s.prototype.$VideoUploadRequest15=function(){'use strict';var t=i.create('form',{action:this.$VideoUploadRequest1,method:'POST'});l.createHiddenInputs(babelHelpers['extends']({fb_dtsg:j.getToken()},this.$VideoUploadRequest4),t);var u=new k(t,null,{allowCrossOrigin:this.$VideoUploadRequest3});u.subscribe('success',this.$VideoUploadRequest17.bind(this));u.subscribe('failure',this.$VideoUploadRequest18.bind(this));u.subscribe('progress',this.$VideoUploadRequest19.bind(this));return u;};s.prototype.$VideoUploadRequest16=function(t){'use strict';i.appendContent(document.body,t.getRoot());q(t.getRoot());};s.prototype.$VideoUploadRequest17=function(event,t){'use strict';this.$VideoUploadRequest7(t.response);};s.prototype.$VideoUploadRequest18=function(event,t){'use strict';this.$VideoUploadRequest8(t.response);};s.prototype.$VideoUploadRequest19=function(event,t){'use strict';this.$VideoUploadRequest10(t.event);};f.exports=s;},null);
__d("VideoUploadRequestContext",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(){"use strict";this.reset();}h.prototype.setFile=function(i){"use strict";this.$VideoUploadRequestContext1=i;return this;};h.prototype.getFile=function(){"use strict";return this.$VideoUploadRequestContext1;};h.prototype.setMetadata=function(i){"use strict";this.$VideoUploadRequestContext2=i;return this;};h.prototype.getMetadata=function(){"use strict";return this.$VideoUploadRequestContext2;};h.prototype.setVideoID=function(i){"use strict";this.$VideoUploadRequestContext3=i;return this;};h.prototype.getVideoID=function(){"use strict";return this.$VideoUploadRequestContext3;};h.prototype.setStartOffset=function(i){"use strict";this.$VideoUploadRequestContext4=i;return this;};h.prototype.getStartOffset=function(){"use strict";return this.$VideoUploadRequestContext4;};h.prototype.setEndOffset=function(i){"use strict";this.$VideoUploadRequestContext5=i;return this;};h.prototype.getEndOffset=function(){"use strict";return this.$VideoUploadRequestContext5;};h.prototype.setPartitionStartOffset=function(i){"use strict";this.$VideoUploadRequestContext6=i;return this;};h.prototype.getPartitionStartOffset=function(){"use strict";return this.$VideoUploadRequestContext6;};h.prototype.setPartitionEndOffset=function(i){"use strict";this.$VideoUploadRequestContext7=i;return this;};h.prototype.getPartitionEndOffset=function(){"use strict";return this.$VideoUploadRequestContext7;};h.prototype.setTargetID=function(i){"use strict";this.$VideoUploadRequestContext8=i;return this;};h.prototype.getTargetID=function(){"use strict";return this.$VideoUploadRequestContext8;};h.prototype.setSource=function(i){"use strict";this.$VideoUploadRequestContext9=i;return this;};h.prototype.getSource=function(){"use strict";return this.$VideoUploadRequestContext9;};h.prototype.setWaterfallID=function(i){"use strict";this.$VideoUploadRequestContext10=i;return this;};h.prototype.getWaterfallID=function(){"use strict";return this.$VideoUploadRequestContext10;};h.prototype.setComposerEntryPointRef=function(i){"use strict";this.$VideoUploadRequestContext11=i;};h.prototype.getComposerEntryPointRef=function(){"use strict";return this.$VideoUploadRequestContext11;};h.prototype.setSupportsChunking=function(i){"use strict";this.$VideoUploadRequestContext12=i;return this;};h.prototype.getSupportsChunking=function(){"use strict";return this.$VideoUploadRequestContext12;};h.prototype.setSupportsFileAPI=function(i){"use strict";this.$VideoUploadRequestContext13=i;return this;};h.prototype.getSupportsFileAPI=function(){"use strict";return this.$VideoUploadRequestContext13;};h.prototype.setCreatorProduct=function(i){"use strict";this.$VideoUploadRequestContext14=i;return this;};h.prototype.getCreatorProduct=function(){"use strict";return this.$VideoUploadRequestContext14;};h.prototype.reset=function(){"use strict";this.$VideoUploadRequestContext1=null;this.$VideoUploadRequestContext3=null;this.$VideoUploadRequestContext4=null;this.$VideoUploadRequestContext5=null;this.$VideoUploadRequestContext8=null;this.$VideoUploadRequestContext9=null;this.$VideoUploadRequestContext10=null;this.$VideoUploadRequestContext11=null;this.$VideoUploadRequestContext12=null;this.$VideoUploadRequestContext13=null;this.$VideoUploadRequestContext6=null;this.$VideoUploadRequestContext7=null;this.$VideoUploadRequestContext14=null;};f.exports=h;},null);
__d('VideoUploadPostRequestManager',['ArbiterMixin','VideoUploadRequest','mixin'],function a(b,c,d,e,f,g,h,i,j){var k,l;if(c.__markCompiled)c.__markCompiled();k=babelHelpers.inherits(m,j(h));l=k&&k.prototype;function m(n,o,p,q,r){'use strict';l.constructor.call(this);this.$VideoUploadPostRequestManager1=n;this.$VideoUploadPostRequestManager2=o;this.$VideoUploadPostRequestManager3=p;this.$VideoUploadPostRequestManager4=0;this.$VideoUploadPostRequestManager5=q;this.$VideoUploadPostRequestManager6=r;this.$VideoUploadPostRequestManager7=0;}m.prototype.getRequest=function(){'use strict';return this.$VideoUploadPostRequestManager8;};m.prototype.sendRequest=function(n){'use strict';if(this.$VideoUploadPostRequestManager8)return;this.$VideoUploadPostRequestManager9=babelHelpers['extends']({},n.getMetadata(),this.__createRequestData(n));this.$VideoUploadPostRequestManager10=this.$VideoUploadPostRequestManager9.thumb;delete this.$VideoUploadPostRequestManager9.thumb;this.$VideoUploadPostRequestManager11=this.$VideoUploadPostRequestManager9.captions;delete this.$VideoUploadPostRequestManager9.captions;this.$VideoUploadPostRequestManager12=n.getWaterfallID();this.$VideoUploadPostRequestManager13();this.inform('request-started');};m.prototype.$VideoUploadPostRequestManager13=function(){'use strict';clearTimeout(this.$VideoUploadPostRequestManager14);this.$VideoUploadPostRequestManager14=null;this.$VideoUploadPostRequestManager8=this.__getVideoUploadRequest(this.$VideoUploadPostRequestManager1).setAllowCrossOrigin(true).setData(this.$VideoUploadPostRequestManager9).setThumbnail(this.$VideoUploadPostRequestManager10).setCaptions(this.$VideoUploadPostRequestManager11).setWaterfallID(this.$VideoUploadPostRequestManager12).setSuccessHandler(this.$VideoUploadPostRequestManager15.bind(this)).setErrorHandler(this.$VideoUploadPostRequestManager16.bind(this)).setTransportErrorHandler(this.$VideoUploadPostRequestManager17.bind(this));this.$VideoUploadPostRequestManager8.send();};m.prototype.__createRequestData=function(n){'use strict';return {video_id:n.getVideoID(),target_id:n.getTargetID(),source:n.getSource(),waterfall_id:n.getWaterfallID(),creator_product:n.getCreatorProduct(),composer_entry_point_ref:n.getComposerEntryPointRef&&n.getComposerEntryPointRef(),supports_chunking:n.getSupportsChunking()};};m.prototype.__getVideoUploadRequest=function(n){'use strict';return new i(n);};m.prototype.clearRequest=function(){'use strict';this.$VideoUploadPostRequestManager8=null;this.$VideoUploadPostRequestManager7=0;this.$VideoUploadPostRequestManager4=0;};m.prototype.isInProgress=function(){'use strict';return !!this.$VideoUploadPostRequestManager8;};m.prototype.$VideoUploadPostRequestManager18=function(n){'use strict';clearTimeout(this.$VideoUploadPostRequestManager14);this.$VideoUploadPostRequestManager14=setTimeout(this.$VideoUploadPostRequestManager13.bind(this),n);};m.prototype.$VideoUploadPostRequestManager19=function(n,o){'use strict';return Math.pow(n,o)*1000;};m.prototype.$VideoUploadPostRequestManager15=function(n){'use strict';this.inform('request-finished',{video_id:n.getPayload().video_id,transport_retries:this.$VideoUploadPostRequestManager4,server_retries:this.$VideoUploadPostRequestManager7});this.clearRequest();};m.prototype.$VideoUploadPostRequestManager20=function(n){'use strict';this.inform('request-failed',{error_code:n.getError(),error_description:n.getErrorDescription(),error_summary:n.getErrorSummary(),transport_retries:this.$VideoUploadPostRequestManager4,server_retries:this.$VideoUploadPostRequestManager7,error_is_transient:n.isTransient()});this.clearRequest();};m.prototype.$VideoUploadPostRequestManager16=function(n){'use strict';this.$VideoUploadPostRequestManager8=null;this.$VideoUploadPostRequestManager4=0;if(n.isTransient()&&this.$VideoUploadPostRequestManager7<this.$VideoUploadPostRequestManager5){this.$VideoUploadPostRequestManager7++;this.$VideoUploadPostRequestManager18(this.$VideoUploadPostRequestManager19(this.$VideoUploadPostRequestManager6,this.$VideoUploadPostRequestManager7));}else this.$VideoUploadPostRequestManager20(n);};m.prototype.$VideoUploadPostRequestManager17=function(n){'use strict';if(this.$VideoUploadPostRequestManager2===0||this.$VideoUploadPostRequestManager4>=this.$VideoUploadPostRequestManager2){this.$VideoUploadPostRequestManager20(n);}else{this.$VideoUploadPostRequestManager4++;this.$VideoUploadPostRequestManager8=null;this.$VideoUploadPostRequestManager18(this.$VideoUploadPostRequestManager19(this.$VideoUploadPostRequestManager3,this.$VideoUploadPostRequestManager4));}};f.exports=m;},null);
__d('VideoUploadConnectionMonitor',['ArbiterMixin','Network','VideoUploadFeatureDetector','debounce','mixin'],function a(b,c,d,e,f,g,h,i,j,k,l){var m,n;if(c.__markCompiled)c.__markCompiled();m=babelHelpers.inherits(o,l(h));n=m&&m.prototype;function o(){'use strict';n.constructor.call(this);this.$VideoUploadConnectionMonitor1=false;this.$VideoUploadConnectionMonitor2=[];this.$VideoUploadConnectionMonitor3=false;this.$VideoUploadConnectionMonitor4=true;this.$VideoUploadConnectionMonitor5=k(function(){this.$VideoUploadConnectionMonitor6(false);}.bind(this),2000);}o.prototype.notifyStart=function(){'use strict';if(this.$VideoUploadConnectionMonitor3)return;if(this.$VideoUploadConnectionMonitor2.length===0){this.$VideoUploadConnectionMonitor2.push(i.addListener('online',function(){this.$VideoUploadConnectionMonitor6(true);}.bind(this)));this.$VideoUploadConnectionMonitor2.push(i.addListener('offline',function(){if(this.$VideoUploadConnectionMonitor1){this.$VideoUploadConnectionMonitor5();}else{this.$VideoUploadConnectionMonitor5.reset();setTimeout(this.$VideoUploadConnectionMonitor5,2000);}}.bind(this)));}this.$VideoUploadConnectionMonitor3=true;};o.prototype.notifyProgress=function(event){'use strict';if(!this.$VideoUploadConnectionMonitor3)return;if(!event)return;if(j.supportsFullProgress()){this.$VideoUploadConnectionMonitor1=true;if(event.total&&event.loaded===event.total){this.$VideoUploadConnectionMonitor5.reset();}else this.$VideoUploadConnectionMonitor5();}};o.prototype.notifySuccess=function(){'use strict';if(!this.$VideoUploadConnectionMonitor3)return;this.reset();this.$VideoUploadConnectionMonitor6(true);};o.prototype.notifyTransportError=function(){'use strict';if(!this.$VideoUploadConnectionMonitor3)return;this.$VideoUploadConnectionMonitor3=false;this.$VideoUploadConnectionMonitor6(false);};o.prototype.notifyError=function(){'use strict';if(!this.$VideoUploadConnectionMonitor3)return;this.reset();this.$VideoUploadConnectionMonitor6(true);};o.prototype.isOnline=function(){'use strict';return this.$VideoUploadConnectionMonitor4;};o.prototype.reset=function(){'use strict';while(this.$VideoUploadConnectionMonitor2.length)this.$VideoUploadConnectionMonitor2.pop().remove();this.$VideoUploadConnectionMonitor5.reset();this.$VideoUploadConnectionMonitor3=false;};o.prototype.$VideoUploadConnectionMonitor6=function(p){'use strict';this.$VideoUploadConnectionMonitor5.reset();if(this.$VideoUploadConnectionMonitor4!==p){this.$VideoUploadConnectionMonitor4=p;if(this.$VideoUploadConnectionMonitor4){this.inform('online');}else this.inform('offline');}};f.exports=o;},null);
__d('VideoUploadReceiveRequestManager',['ArbiterMixin','VideoUploadConnectionMonitor','VideoUploadRequest','mixin','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l){var m,n;if(c.__markCompiled)c.__markCompiled();var o=1363037;m=babelHelpers.inherits(p,k(h));n=m&&m.prototype;function p(q,r,s,t,u,v,w,x,y){'use strict';n.constructor.call(this);this.$VideoUploadReceiveRequestManager1=q;this.$VideoUploadReceiveRequestManager2=r;this.$VideoUploadReceiveRequestManager3=s;this.$VideoUploadReceiveRequestManager4=t;this.$VideoUploadReceiveRequestManager5=u;this.$VideoUploadReceiveRequestManager6=v;this.$VideoUploadReceiveRequestManager7=w;this.$VideoUploadReceiveRequestManager8=x;this.$VideoUploadReceiveRequestManager9=y;this.$VideoUploadReceiveRequestManager10=0;this.$VideoUploadReceiveRequestManager11=0;this.$VideoUploadReceiveRequestManager12=0;this.$VideoUploadReceiveRequestManager13=null;this.$VideoUploadReceiveRequestManager14=null;this.$VideoUploadReceiveRequestManager15=0;this.$VideoUploadReceiveRequestManager16='constructed';this.$VideoUploadReceiveRequestManager17=new i();this.$VideoUploadReceiveRequestManager17.subscribe('online',this.$VideoUploadReceiveRequestManager18.bind(this));this.$VideoUploadReceiveRequestManager17.subscribe('offline',this.$VideoUploadReceiveRequestManager19.bind(this));}p.prototype.sendRequest=function(q){'use strict';this.$VideoUploadReceiveRequestManager16='sending request';if(this.$VideoUploadReceiveRequestManager20){this.$VideoUploadReceiveRequestManager16='request already in progress';return;}this.$VideoUploadReceiveRequestManager15=q.getEndOffset()-q.getStartOffset();this.$VideoUploadReceiveRequestManager21=q;this.$VideoUploadReceiveRequestManager22();};p.prototype.cancelRequest=function(){'use strict';if(!this.$VideoUploadReceiveRequestManager20)return;this.$VideoUploadReceiveRequestManager20.abort();this.$VideoUploadReceiveRequestManager23();};p.prototype.appendStateLogData=function(q,r){'use strict';q[r+'last_log_entry']=this.$VideoUploadReceiveRequestManager16;q[r+'upload_speed']=this.$VideoUploadReceiveRequestManager14;q[r+'transport_retries']=this.$VideoUploadReceiveRequestManager10;q[r+'server_retries']=this.$VideoUploadReceiveRequestManager11;q[r+'timeout_retries']=this.$VideoUploadReceiveRequestManager12;q[r+'last_timeout_value']=this.$VideoUploadReceiveRequestManager24;q[r+'last_request_start_time']=this.$VideoUploadReceiveRequestManager13;q[r+'pending_request']=this.$VideoUploadReceiveRequestManager20!=null;q[r+'pending_timer']=this.$VideoUploadReceiveRequestManager25!=null;q[r+'cached_chunk']=this.$VideoUploadReceiveRequestManager26!=null;if(this.$VideoUploadReceiveRequestManager21!=null){q[r+'start_offset']=this.$VideoUploadReceiveRequestManager21.getStartOffset();q[r+'end_offset']=this.$VideoUploadReceiveRequestManager21.getEndOffset();q[r+'partition_start_offset']=this.$VideoUploadReceiveRequestManager21.getPartitionStartOffset();q[r+'partition_end_offset']=this.$VideoUploadReceiveRequestManager21.getPartitionEndOffset();}if(this.$VideoUploadReceiveRequestManager17!=null)q[r+'connection_monitor_online']=this.$VideoUploadReceiveRequestManager17.isOnline();};p.prototype.$VideoUploadReceiveRequestManager23=function(){'use strict';this.$VideoUploadReceiveRequestManager20=null;this.$VideoUploadReceiveRequestManager26=null;this.$VideoUploadReceiveRequestManager10=0;this.$VideoUploadReceiveRequestManager11=0;this.$VideoUploadReceiveRequestManager12=0;this.$VideoUploadReceiveRequestManager13=null;this.$VideoUploadReceiveRequestManager14=null;this.$VideoUploadReceiveRequestManager15=0;this.$VideoUploadReceiveRequestManager21.reset();this.$VideoUploadReceiveRequestManager17.reset();clearTimeout(this.$VideoUploadReceiveRequestManager25);this.$VideoUploadReceiveRequestManager25=null;};p.prototype.$VideoUploadReceiveRequestManager22=function(q){'use strict';clearTimeout(this.$VideoUploadReceiveRequestManager25);this.$VideoUploadReceiveRequestManager25=null;if(this.$VideoUploadReceiveRequestManager21.getSupportsChunking()&&this.$VideoUploadReceiveRequestManager21.getStartOffset()>=this.$VideoUploadReceiveRequestManager21.getPartitionEndOffset()){if(!q){this.inform('request-finished',{start_offset:this.$VideoUploadReceiveRequestManager21.getEndOffset()-1,end_offset:this.$VideoUploadReceiveRequestManager21.getEndOffset(),transport_retries:this.$VideoUploadReceiveRequestManager10,server_retries:this.$VideoUploadReceiveRequestManager11,upload_speed:this.$VideoUploadReceiveRequestManager14});this.$VideoUploadReceiveRequestManager16='request finished - notified';}else this.$VideoUploadReceiveRequestManager16='request finished - not notified';return;}this.$VideoUploadReceiveRequestManager20=this.__getVideoUploadRequest(this.$VideoUploadReceiveRequestManager1).setAllowCrossOrigin(true).setData(this.__createRequestData(this.$VideoUploadReceiveRequestManager21)).setWaterfallID(this.$VideoUploadReceiveRequestManager21.getWaterfallID()).setSuccessHandler(this.__handleSuccessResponse.bind(this)).setErrorHandler(this.__handleServerFailureResponse.bind(this)).setTransportErrorHandler(this.$VideoUploadReceiveRequestManager27.bind(this)).setUploadProgressHandler(this.$VideoUploadReceiveRequestManager28.bind(this));this.$VideoUploadReceiveRequestManager13=Date.now();if(this.$VideoUploadReceiveRequestManager21.getSupportsChunking()){if(this.$VideoUploadReceiveRequestManager4){var r=this.$VideoUploadReceiveRequestManager29(this.$VideoUploadReceiveRequestManager21.getEndOffset()-this.$VideoUploadReceiveRequestManager21.getStartOffset(),this.$VideoUploadReceiveRequestManager14);this.$VideoUploadReceiveRequestManager20.setTimeoutHandler(r,this.__handleResponseTimeout.bind(this));this.$VideoUploadReceiveRequestManager16='sending chunk with timeout = '+r;this.$VideoUploadReceiveRequestManager24=r;}else this.$VideoUploadReceiveRequestManager16='sending chunk without timeout';this.$VideoUploadReceiveRequestManager20.sendChunk(this.$VideoUploadReceiveRequestManager30());}else{this.$VideoUploadReceiveRequestManager16='sending file';this.$VideoUploadReceiveRequestManager20.sendFile(this.$VideoUploadReceiveRequestManager21.getFile().getFileInput());}this.$VideoUploadReceiveRequestManager17.notifyStart();this.inform('request-started',{start_offset:this.$VideoUploadReceiveRequestManager21.getStartOffset(),end_offset:this.$VideoUploadReceiveRequestManager21.getEndOffset(),transport_retries:this.$VideoUploadReceiveRequestManager10,server_retries:this.$VideoUploadReceiveRequestManager11,upload_speed:this.$VideoUploadReceiveRequestManager14});};p.prototype.__getVideoUploadRequest=function(q){'use strict';return new j(q);};p.prototype.$VideoUploadReceiveRequestManager31=function(q){'use strict';this.$VideoUploadReceiveRequestManager16='setting request to send after'+q;clearTimeout(this.$VideoUploadReceiveRequestManager25);this.$VideoUploadReceiveRequestManager25=setTimeout(this.$VideoUploadReceiveRequestManager22.bind(this),q);};p.prototype.$VideoUploadReceiveRequestManager30=function(){'use strict';if(this.$VideoUploadReceiveRequestManager26)return this.$VideoUploadReceiveRequestManager26;this.$VideoUploadReceiveRequestManager26=this.$VideoUploadReceiveRequestManager21.getFile().getChunk(this.$VideoUploadReceiveRequestManager21.getStartOffset(),this.$VideoUploadReceiveRequestManager21.getEndOffset());return this.$VideoUploadReceiveRequestManager26;};p.prototype.__createRequestData=function(q){'use strict';return {video_id:q.getVideoID(),start_offset:q.getStartOffset(),source:q.getSource(),target_id:q.getTargetID(),waterfall_id:q.getWaterfallID(),composer_entry_point_ref:q.getComposerEntryPointRef&&q.getComposerEntryPointRef(),supports_chunking:q.getSupportsChunking(),upload_speed:this.$VideoUploadReceiveRequestManager14,partition_start_offset:q.getPartitionStartOffset(),partition_end_offset:q.getPartitionEndOffset()};};p.prototype.__handleSuccessResponse=function(q){'use strict';this.$VideoUploadReceiveRequestManager16='success response received';var r=Date.now()-this.$VideoUploadReceiveRequestManager13;r=r===0?1:r;var s=q.getPayload();if(s.start_offset===this.$VideoUploadReceiveRequestManager21.getEndOffset()){var t=this.$VideoUploadReceiveRequestManager21.getEndOffset()-this.$VideoUploadReceiveRequestManager21.getStartOffset();this.$VideoUploadReceiveRequestManager14=Math.floor(t/r);}else this.$VideoUploadReceiveRequestManager14=null;this.$VideoUploadReceiveRequestManager17.notifySuccess();this.inform('request-finished',{start_offset:this.$VideoUploadReceiveRequestManager21.getStartOffset(),end_offset:this.$VideoUploadReceiveRequestManager21.getEndOffset(),transport_retries:this.$VideoUploadReceiveRequestManager10,server_retries:this.$VideoUploadReceiveRequestManager11,upload_speed:this.$VideoUploadReceiveRequestManager14});this.$VideoUploadReceiveRequestManager21.setStartOffset(s.start_offset);this.$VideoUploadReceiveRequestManager21.setEndOffset(s.end_offset);this.$VideoUploadReceiveRequestManager20=null;this.$VideoUploadReceiveRequestManager26=null;this.$VideoUploadReceiveRequestManager10=0;this.$VideoUploadReceiveRequestManager11=0;this.$VideoUploadReceiveRequestManager12=0;if(this.$VideoUploadReceiveRequestManager21.getSupportsChunking())this.$VideoUploadReceiveRequestManager22(true);};p.prototype.__handleServerFailureResponse=function(q){'use strict';this.$VideoUploadReceiveRequestManager16='failure response received';this.$VideoUploadReceiveRequestManager20=null;this.$VideoUploadReceiveRequestManager10=0;this.$VideoUploadReceiveRequestManager14=null;this.$VideoUploadReceiveRequestManager12=0;this.$VideoUploadReceiveRequestManager17.notifyError();if(this.__hasInvalidStartOffsetAndHasRetries(q.getError())){this.$VideoUploadReceiveRequestManager11++;var r=q.getPayload();this.$VideoUploadReceiveRequestManager16='invalid offset response received start='+r.start_offset+' end='+r.end_offset;if(this.$VideoUploadReceiveRequestManager21.getStartOffset()!=r.start_offset||this.$VideoUploadReceiveRequestManager21.getEndOffset()!=r.end_offset){this.$VideoUploadReceiveRequestManager21.setStartOffset(r.start_offset);this.$VideoUploadReceiveRequestManager21.setEndOffset(r.end_offset);this.$VideoUploadReceiveRequestManager26=null;}this.$VideoUploadReceiveRequestManager22();}else if((q.isTransient()||this.$VideoUploadReceiveRequestManager9)&&this.$VideoUploadReceiveRequestManager11<this.$VideoUploadReceiveRequestManager3){this.$VideoUploadReceiveRequestManager16='transient server error';this.$VideoUploadReceiveRequestManager11++;this.$VideoUploadReceiveRequestManager31(this.$VideoUploadReceiveRequestManager32(this.$VideoUploadReceiveRequestManager8,this.$VideoUploadReceiveRequestManager11));}else this.$VideoUploadReceiveRequestManager33(q);};p.prototype.__handleResponseTimeout=function(q){'use strict';this.inform('request-timeout',{start_offset:this.$VideoUploadReceiveRequestManager21.getStartOffset(),end_offset:this.$VideoUploadReceiveRequestManager21.getEndOffset(),transport_retries:this.$VideoUploadReceiveRequestManager10,server_retries:this.$VideoUploadReceiveRequestManager11,timeout_retries:this.$VideoUploadReceiveRequestManager12,upload_speed:this.$VideoUploadReceiveRequestManager14});this.$VideoUploadReceiveRequestManager20.abort();this.$VideoUploadReceiveRequestManager20=null;this.$VideoUploadReceiveRequestManager14=null;this.$VideoUploadReceiveRequestManager17.notifyTransportError();if(++this.$VideoUploadReceiveRequestManager12<=this.$VideoUploadReceiveRequestManager5){var r=this.$VideoUploadReceiveRequestManager21.getEndOffset()-this.$VideoUploadReceiveRequestManager21.getStartOffset();r=Math.floor(r/2);r=Math.max(r,this.$VideoUploadReceiveRequestManager15);var s=this.$VideoUploadReceiveRequestManager21.getEndOffset();s=Math.min(s,this.$VideoUploadReceiveRequestManager21.getStartOffset()+r);this.$VideoUploadReceiveRequestManager21.setEndOffset(s);this.$VideoUploadReceiveRequestManager26=null;this.$VideoUploadReceiveRequestManager16='resending after timeout with chunksize='+r;this.$VideoUploadReceiveRequestManager22();}else this.$VideoUploadReceiveRequestManager34({error_code:1006,error_description:l._("Your browser appears to be offline. Please check your internet connection and try again."),error_summary:l._("No Network Connection"),error_is_transient:true});};p.prototype.__hasInvalidStartOffsetAndHasRetries=function(q){'use strict';return q===o&&this.$VideoUploadReceiveRequestManager11<this.$VideoUploadReceiveRequestManager3;};p.prototype.$VideoUploadReceiveRequestManager27=function(q){'use strict';this.$VideoUploadReceiveRequestManager17.notifyTransportError();this.$VideoUploadReceiveRequestManager14=null;this.$VideoUploadReceiveRequestManager12=0;if(this.$VideoUploadReceiveRequestManager10<this.$VideoUploadReceiveRequestManager2){this.$VideoUploadReceiveRequestManager16='resending after transport failure';this.$VideoUploadReceiveRequestManager10++;this.$VideoUploadReceiveRequestManager20=null;this.$VideoUploadReceiveRequestManager31(this.$VideoUploadReceiveRequestManager32(this.$VideoUploadReceiveRequestManager7,this.$VideoUploadReceiveRequestManager10));}else this.$VideoUploadReceiveRequestManager33(q);};p.prototype.$VideoUploadReceiveRequestManager33=function(q){'use strict';this.$VideoUploadReceiveRequestManager34({error_code:q.getError(),error_description:q.getErrorDescription(),error_summary:q.getErrorSummary(),error_is_transient:q.isTransient()});};p.prototype.$VideoUploadReceiveRequestManager34=function(q){'use strict';this.$VideoUploadReceiveRequestManager16='handling failure error';this.inform('request-failed',q);this.$VideoUploadReceiveRequestManager23();};p.prototype.$VideoUploadReceiveRequestManager28=function(event){'use strict';this.$VideoUploadReceiveRequestManager17.notifyProgress(event);this.inform('request-progressed',{file_size:this.$VideoUploadReceiveRequestManager21.getFile().getSize(),start_offset:this.$VideoUploadReceiveRequestManager21.getStartOffset(),sent_bytes:event.loaded});};p.prototype.$VideoUploadReceiveRequestManager18=function(event){'use strict';this.inform('online');this.$VideoUploadReceiveRequestManager10=0;this.$VideoUploadReceiveRequestManager12=0;if(this.$VideoUploadReceiveRequestManager25)this.$VideoUploadReceiveRequestManager22();};p.prototype.$VideoUploadReceiveRequestManager19=function(event){'use strict';this.inform('offline');};p.prototype.$VideoUploadReceiveRequestManager32=function(q,r){'use strict';return Math.pow(q,r)*1000;};p.prototype.$VideoUploadReceiveRequestManager29=function(q,r){'use strict';var s;if(r>0){s=r;}else s=10;var t=Math.floor(q/s*this.$VideoUploadReceiveRequestManager6/100);return Math.max(t,30000);};f.exports=p;},null);
__d('VideoUploadStartRequestManager',['ArbiterMixin','VideoUploadRequest','FileHasher','performanceNow','mixin','Assert'],function a(b,c,d,e,f,g,h,i,j,k,l,m){var n,o;if(c.__markCompiled)c.__markCompiled();n=babelHelpers.inherits(p,l(h));o=n&&n.prototype;function p(q,r,s,t,u,v,w){'use strict';o.constructor.call(this);this.$VideoUploadStartRequestManager1=q;this.$VideoUploadStartRequestManager2=r;this.$VideoUploadStartRequestManager3=s;this.$VideoUploadStartRequestManager4=0;this.$VideoUploadStartRequestManager5=t;this.$VideoUploadStartRequestManager6=u;this.$VideoUploadStartRequestManager7=v;this.$VideoUploadStartRequestManager8=w;this.$VideoUploadStartRequestManager9=0;}p.prototype.getRequest=function(){'use strict';return this.$VideoUploadStartRequestManager10;};p.prototype.sendRequest=function(q){'use strict';if(this.$VideoUploadStartRequestManager11||this.$VideoUploadStartRequestManager10)return;this.$VideoUploadStartRequestManager12=q;if(this.$VideoUploadStartRequestManager5&&this.$VideoUploadStartRequestManager12.getFile().getFile()&&this.$VideoUploadStartRequestManager12.getFile().getFile().size<this.$VideoUploadStartRequestManager6&&j.isSupported()){this.$VideoUploadStartRequestManager13=k();this.$VideoUploadStartRequestManager11=new j();this.$VideoUploadStartRequestManager11.hash(this.$VideoUploadStartRequestManager12.getFile().getFile(),function(r){this.$VideoUploadStartRequestManager13=k()-this.$VideoUploadStartRequestManager13;this.$VideoUploadStartRequestManager14=r.hash;this.$VideoUploadStartRequestManager11.destroy();this.$VideoUploadStartRequestManager11=null;if(!r.hash)this.$VideoUploadStartRequestManager15=r.exception;this.$VideoUploadStartRequestManager16();}.bind(this));}else this.$VideoUploadStartRequestManager16();};p.prototype.$VideoUploadStartRequestManager16=function(){'use strict';this.$VideoUploadStartRequestManager17();this.inform('request-started',{hash_time:this.$VideoUploadStartRequestManager13,hash_exception:this.$VideoUploadStartRequestManager15});};p.prototype.$VideoUploadStartRequestManager17=function(){'use strict';clearTimeout(this.$VideoUploadStartRequestManager18);this.$VideoUploadStartRequestManager18=null;this.$VideoUploadStartRequestManager10=this.__getVideoUploadRequest(this.$VideoUploadStartRequestManager1).setAllowCrossOrigin(true).setData(this.__getDataToSend(this.$VideoUploadStartRequestManager12,this.$VideoUploadStartRequestManager14)).setWaterfallID(this.$VideoUploadStartRequestManager12.getWaterfallID()).setSuccessHandler(this.$VideoUploadStartRequestManager19.bind(this)).setErrorHandler(this.$VideoUploadStartRequestManager20.bind(this)).setTransportErrorHandler(this.$VideoUploadStartRequestManager21.bind(this));this.$VideoUploadStartRequestManager10.send();};p.prototype.__getVideoUploadRequest=function(q){'use strict';return new i(q);};p.prototype.__getDataToSend=function(q,r){'use strict';return {file_size:q.getFile().getSize(),file_extension:q.getFile().getExtension(),target_id:q.getTargetID(),source:q.getSource(),waterfall_id:q.getWaterfallID(),composer_entry_point_ref:q.getComposerEntryPointRef&&q.getComposerEntryPointRef(),supports_chunking:q.getSupportsChunking(),supports_file_api:q.getSupportsFileAPI(),partition_start_offset:q.getPartitionStartOffset(),partition_end_offset:q.getPartitionEndOffset(),creator_product:q.getCreatorProduct(),original_file_hash:r};};p.prototype.cancelRequest=function(){'use strict';this.$VideoUploadStartRequestManager22();};p.prototype.$VideoUploadStartRequestManager23=function(q){'use strict';clearTimeout(this.$VideoUploadStartRequestManager18);this.$VideoUploadStartRequestManager18=setTimeout(this.$VideoUploadStartRequestManager17.bind(this),q);};p.prototype.$VideoUploadStartRequestManager22=function(){'use strict';if(this.$VideoUploadStartRequestManager11){this.$VideoUploadStartRequestManager11.destroy();this.$VideoUploadStartRequestManager11=null;}if(this.$VideoUploadStartRequestManager10){this.$VideoUploadStartRequestManager10.abort();this.$VideoUploadStartRequestManager10=null;}this.$VideoUploadStartRequestManager9=0;this.$VideoUploadStartRequestManager4=0;this.$VideoUploadStartRequestManager12=null;clearTimeout(this.$VideoUploadStartRequestManager18);this.$VideoUploadStartRequestManager18=null;};p.prototype.$VideoUploadStartRequestManager24=function(q,r){'use strict';return Math.pow(q,r)*1000;};p.prototype.$VideoUploadStartRequestManager19=function(q){'use strict';var r=q.getPayload();this.inform('request-finished',this.__getSuccessInformData(r));this.$VideoUploadStartRequestManager10=null;m.isTrue(this.$VideoUploadStartRequestManager11==null,'Unexpected: if file hasher is not null, clean up is required.');};p.prototype.__getSuccessInformData=function(q){'use strict';return {video_id:q.video_id,start_offset:q.start_offset,end_offset:q.end_offset,transport_retries:this.$VideoUploadStartRequestManager4,server_retries:this.$VideoUploadStartRequestManager9,skip_upload:q.skip_upload,hash_time:this.$VideoUploadStartRequestManager13};};p.prototype.$VideoUploadStartRequestManager25=function(q){'use strict';this.inform('request-failed',this.$VideoUploadStartRequestManager26(q));this.$VideoUploadStartRequestManager10=null;m.isTrue(this.$VideoUploadStartRequestManager11==null,'Unexpected: if file hasher is not null, clean up is required.');};p.prototype.$VideoUploadStartRequestManager20=function(q){'use strict';this.$VideoUploadStartRequestManager10=null;this.$VideoUploadStartRequestManager4=0;if(q.isTransient()&&this.$VideoUploadStartRequestManager9<this.$VideoUploadStartRequestManager7){this.$VideoUploadStartRequestManager9++;this.$VideoUploadStartRequestManager23(this.$VideoUploadStartRequestManager24(this.$VideoUploadStartRequestManager8,this.$VideoUploadStartRequestManager9));}else this.$VideoUploadStartRequestManager25(q);};p.prototype.$VideoUploadStartRequestManager21=function(q){'use strict';if(this.$VideoUploadStartRequestManager2===0||this.$VideoUploadStartRequestManager4>=this.$VideoUploadStartRequestManager2){this.$VideoUploadStartRequestManager25(q);}else{this.$VideoUploadStartRequestManager4++;this.$VideoUploadStartRequestManager10=null;this.$VideoUploadStartRequestManager23(this.$VideoUploadStartRequestManager24(this.$VideoUploadStartRequestManager3,this.$VideoUploadStartRequestManager4));}};p.prototype.$VideoUploadStartRequestManager26=function(q){'use strict';return {error_code:q.getError(),error_description:q.getErrorDescription(),error_summary:q.getErrorSummary(),transport_retries:this.$VideoUploadStartRequestManager4,server_retries:this.$VideoUploadStartRequestManager9,error_is_transient:q.isTransient()};};f.exports=p;},null);
__d('AdsVideoEncodingAsyncNotifier',['AdsVideoFetcher','ApiVideoStatusType'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=1000;function k(l){this.$AdsVideoEncodingAsyncNotifier1=l;this.$AdsVideoEncodingAsyncNotifier2=0;}k.prototype.start=function(){this.$AdsVideoEncodingAsyncNotifier3=Date.now();this.$AdsVideoEncodingAsyncNotifier4();};k.prototype.getEncodingElapsedTime=function(){return this.$AdsVideoEncodingAsyncNotifier5;};k.prototype.setOnStatusUpdateListener=function(l){this.$AdsVideoEncodingAsyncNotifier6=l;};k.prototype.setOnFailedListener=function(l){this.$AdsVideoEncodingAsyncNotifier7=l;};k.prototype.setOnSuccessListener=function(l){this.$AdsVideoEncodingAsyncNotifier8=l;};k.prototype.$AdsVideoEncodingAsyncNotifier4=function(){var l=this.$AdsVideoEncodingAsyncNotifier2+j,m=Math.max(0,l-Date.now());setTimeout(function(){return this.$AdsVideoEncodingAsyncNotifier9();}.bind(this),m);};k.prototype.$AdsVideoEncodingAsyncNotifier9=function(){this.$AdsVideoEncodingAsyncNotifier2=Date.now();h.genVideoStatus(this.$AdsVideoEncodingAsyncNotifier1).done(function(l){return this.$AdsVideoEncodingAsyncNotifier10(l);}.bind(this));};k.prototype.$AdsVideoEncodingAsyncNotifier10=function(l){var m=l.video_status||l;if(m===i.PROCESSING){this.$AdsVideoEncodingAsyncNotifier6();this.$AdsVideoEncodingAsyncNotifier4();}else if(m===i.ERROR){this.$AdsVideoEncodingAsyncNotifier7();}else if(m===i.READY)h.genSingleVideo(this.$AdsVideoEncodingAsyncNotifier1).done(function(n){this.$AdsVideoEncodingAsyncNotifier5=Date.now()-this.$AdsVideoEncodingAsyncNotifier3;this.$AdsVideoEncodingAsyncNotifier8(n);}.bind(this));};f.exports=k;},null);
__d('VideoUploadMetadataParser',['VideoUploadFeatureDetector','fileSlice'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=4,k=4,l=5242880,m=24,n=88,o=20,p=16,q=4,r=84,s=[255,204,130,99,248,85,74,147,136,20,88,122,2,82,31,221];function t(u,v){'use strict';this.$VideoUploadMetadataParser1=u;this.$VideoUploadMetadataParser2=v;}t.prototype.getHandler=function(){'use strict';return this.$VideoUploadMetadataParser2;};t.prototype.parse=function(){'use strict';if(!h.supportsFileReading()){this.$VideoUploadMetadataParser2(null);return;}switch(this.$VideoUploadMetadataParser1.getExtension()){case 'mp4':case 'mov':case 'm4v':case '3gp':case '3g2':break;default:this.$VideoUploadMetadataParser2(null);return;}this.$VideoUploadMetadataParser3(0,Math.min(l,this.$VideoUploadMetadataParser1.getSize()),null);};t.prototype.$VideoUploadMetadataParser3=function(u,v,w){'use strict';var x=new FileReader();x.onload=function(event){try{var aa=this.$VideoUploadMetadataParser4(new DataView(x.result),0,v-u,u,w);if(aa.completed){aa=this.$VideoUploadMetadataParser5(aa);this.$VideoUploadMetadataParser2(aa);}else this.$VideoUploadMetadataParser3(u+aa.nextOffset,Math.min(this.$VideoUploadMetadataParser1.getSize(),u+aa.nextOffset+l),aa);}catch(z){this.$VideoUploadMetadataParser2(null);}}.bind(this);var y=this.$VideoUploadMetadataParser1.getFile();x.readAsArrayBuffer(i.call(y,u,v));};t.prototype.$VideoUploadMetadataParser6=function(u,v,w){'use strict';var x=[];for(var y=0;y<w;y++)x.push(String.fromCharCode(u.getUint8(v+y)));return x.join('');};t.prototype.$VideoUploadMetadataParser7=function(u,v,w){'use strict';try{var y=k+j;if(y+s.length<w&&this.$VideoUploadMetadataParser8(u,v+y)){y+=s.length;if(y<w){var z=this.$VideoUploadMetadataParser6(u,v+y,w-y),aa;if(window.DOMParser){var ba=new DOMParser();aa=ba.parseFromString(z,'text/xml');}else{aa=new window.ActiveXObject('Microsoft.XMLDOM');aa.async='false';aa.loadXML(z);}var ca=aa.getElementsByTagNameNS('*','Spherical')[0].childNodes[0].nodeValue;return ca.toLowerCase()==='true';}}}catch(x){}return false;};t.prototype.$VideoUploadMetadataParser8=function(u,v){'use strict';for(var w=0;w<s.length;w++)if(u.getUint8(v+w)!==s[w])return false;return true;};t.prototype.$VideoUploadMetadataParser4=function(u,v,w,x,y){'use strict';if(!y)y={widths:[],heights:[],streamTypes:[],streamDurations:[],isSpherical:false};while(v<w){var z=u.getUint32(v),aa=this.$VideoUploadMetadataParser6(u,v+j,k);if(v+z>w){y.completed=false;y.nextOffset=v;if(z>w)y.nextOffset+=z;return y;}if(v+x===0&&aa!=='ftyp')throw new Error('No ftyp atom');if(z===0)throw new Error('len is 0');var ba=function(){var fa=u.getUint32(v+o),ga=u.getUint32(v+m);return ga/fa;};switch(aa){case 'moov':case 'trak':case 'mdia':v+=j+k;break;case 'mvhd':y.duration=ba();v+=z;break;case 'tkhd':var ca=u.getUint16(v+r),da=u.getUint16(v+n);y.widths.push(ca);y.heights.push(da);v+=z;break;case 'hdlr':var ea=this.$VideoUploadMetadataParser6(u,v+p,q);switch(ea){case 'vide':ea='video';break;case 'soun':ea='audio';break;case 'subt':ea='subtitle';break;default:ea='data';}y.streamTypes.push(ea);v+=z;break;case 'mdhd':y.streamDurations.push(ba());v+=z;break;case 'uuid':y.isSpherical=y.isSpherical||this.$VideoUploadMetadataParser7(u,v,z);v+=z;break;default:v+=z;}}y.completed=true;return y;};t.prototype.$VideoUploadMetadataParser5=function(u){'use strict';var v={streams:{},format:{}},w=u.widths.length,x=u.heights.length,y=u.streamTypes.length,z=u.streamDurations.length;if(w!==x||w!==y||w!==z)return null;for(var aa=0;aa<w;aa++){var ba={width:u.widths[aa],height:u.heights[aa],duration:u.streamDurations[aa],type:u.streamTypes[aa]};if(ba.type==='video'){var ca=ba.width*ba.height,da=v.streams.primaryVideo;if(!da||da.width*da.height>ca)v.streams.primaryVideo=ba;}else if(ba.type==='audio'){var ea=v.streams.primaryAudio;if(!ea||ea.duration<ba.duration)v.streams.primaryAudio=ba;}}v.format.duration=u.duration;v.format.isSpherical=u.isSpherical;return v;};f.exports=t;},null);
__d('VideoUploadSession',['ArbiterMixin','AsyncRequest','VideoUploadCrashMonitor','VideoUploadFeatureDetector','VideoUploadFileValidator','VideoUploadLogger','VideoUploadMetadataParser','VideoUploadPostRequestManager','VideoUploadReceiveRequestManager','VideoUploadRequestContext','VideoUploadStartRequestManager','WaterfallIDGenerator','mixin'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){var u,v;if(c.__markCompiled)c.__markCompiled();u=babelHelpers.inherits(w,t(h));v=u&&u.prototype;function w(x){'use strict';v.constructor.call(this);this.$VideoUploadSession1=x.source;this.$VideoUploadSession2=x.target_id;this.$VideoUploadSession3=x.logging_delay;this.$VideoUploadSession4=x.silent_file_validation;this.$VideoUploadSession5=x.background_upload;this.$VideoUploadSession6=x.actor_id;this.$VideoUploadSession7=x.composer_entry_point_ref;this.$VideoUploadSession8=x.monitor_crashes;this.$VideoUploadSession9=new l({minSize:x.min_size,maxSize:x.max_size,minLength:x.min_length,maxLength:x.max_length,minWidth:x.min_width,minHeight:x.min_height,extensions:x.extensions});this.$VideoUploadSession10=k.supportsChunking();this.$VideoUploadSession11=k.supportsFileAPI();if(this.$VideoUploadSession10){this.$VideoUploadSession12=x.parallel_chunk_uploads;if(this.$VideoUploadSession12){this.$VideoUploadSession13=x.parallel_chunk_upload_filesize;this.$VideoUploadSession14=x.default_chunk_size;}}else this.$VideoUploadSession12=false;this.$VideoUploadSession15=this.$VideoUploadSession16(x);this.$VideoUploadSession17=this.$VideoUploadSession18(x);if(this.$VideoUploadSession12)this.$VideoUploadSession19=this.$VideoUploadSession18(x);this.$VideoUploadSession20=this.$VideoUploadSession21(x);}w.prototype.$VideoUploadSession22=function(){'use strict';this.$VideoUploadSession23=s.generate();this.$VideoUploadSession24=new m({actor_id:this.$VideoUploadSession6,source:this.$VideoUploadSession1,waterfall_id:this.$VideoUploadSession23,target_id:this.$VideoUploadSession2,delay:this.$VideoUploadSession3,is_chunked_upload:this.$VideoUploadSession10,composer_entry_point_ref:this.$VideoUploadSession7});};w.prototype.getLogger=function(){'use strict';if(!this.$VideoUploadSession24)return null;return this.$VideoUploadSession24;};w.prototype.start=function(x){'use strict';this.$VideoUploadSession25=null;this.$VideoUploadSession26=false;this.$VideoUploadSession27=false;this.$VideoUploadSession28=x;this.$VideoUploadSession29=0;this.$VideoUploadSession30=false;this.$VideoUploadSession22();this.__logEvent(m.EVENT_REQUESTED_UPLOADING);this.inform('upload-requested');var y=new n(this.$VideoUploadSession28,this.$VideoUploadSession31.bind(this));y.parse();};w.prototype.post=function(x){'use strict';this.__logEvent(m.EVENT_STARTED_POST_REQUEST);this.inform('post-started',x);var y=this.__createPostRequestContext(x);this.$VideoUploadSession20.sendRequest(y);this.$VideoUploadSession32=x;};w.prototype.__createPostRequestContext=function(x){'use strict';var y=new q();this.__setupPostRequestContext(y,x);return y;};w.prototype.__setupPostRequestContext=function(x,y){'use strict';x.setMetadata(y).setVideoID(this.$VideoUploadSession25).setTargetID(this.$VideoUploadSession2).setSource(this.$VideoUploadSession1).setWaterfallID(this.$VideoUploadSession23).setSupportsChunking(this.$VideoUploadSession10).setCreatorProduct(this.$VideoUploadSession28.getCreatorProduct()).setFile(this.$VideoUploadSession28);if(x.setComposerEntryPointRef)x.setComposerEntryPointRef(this.$VideoUploadSession7);};w.prototype.cancel=function(){'use strict';if(!this.$VideoUploadSession26)return;var x=this.__fetchReceiveRequestManagerStateLogData();this.$VideoUploadSession33();if(this.$VideoUploadSession5){if(!this.$VideoUploadSession27)this.__logEvent(m.EVENT_CANCELED_UPLOADING);if(this.$VideoUploadSession34){this.__logEvent(m.EVENT_CANCELED_FLOW,x);this.$VideoUploadSession34=false;}}else{this.__logEvent(m.EVENT_CANCELED_UPLOADING);this.__logEvent(m.EVENT_CANCELED_FLOW,x);}};w.prototype.abandon=function(){'use strict';if(!this.$VideoUploadSession26)return;var x=this.__fetchReceiveRequestManagerStateLogData();this.$VideoUploadSession33();if(this.$VideoUploadSession5){if(!this.$VideoUploadSession27)this.__logEvent(m.EVENT_ABANDONED_UPLOADING);if(this.$VideoUploadSession34){this.__logEvent(m.EVENT_CANCELED_FLOW,x);this.$VideoUploadSession34=false;}}else{this.__logEvent(m.EVENT_ABANDONED_UPLOADING);this.__logEvent(m.EVENT_CANCELED_FLOW,x);}};w.prototype.isPostInProgress=function(){'use strict';return this.$VideoUploadSession20.isInProgress();};w.prototype.isInProgress=function(){'use strict';return this.$VideoUploadSession26;};w.prototype.getVideoID=function(){'use strict';return this.$VideoUploadSession25;};w.prototype.getUploadTime=function(){'use strict';return this.$VideoUploadSession35;};w.prototype.startFlow=function(){'use strict';if(!this.$VideoUploadSession5||this.$VideoUploadSession34)return;this.__logEvent(m.EVENT_STARTED_FLOW,{is_spherical:this.$VideoUploadSession30?'true':null});this.$VideoUploadSession34=true;if(this.$VideoUploadSession36)this.$VideoUploadSession36.flowStarted();};w.prototype.$VideoUploadSession31=function(x){'use strict';var y,z;if(this.$VideoUploadSession4){var aa=this.$VideoUploadSession9.getValidationErrorMessage(this.$VideoUploadSession28,x);if(aa){z={error_summary:aa.summary,error_description:aa.description};y=false;}else y=true;}else y=this.$VideoUploadSession9.validate(this.$VideoUploadSession28,x);if(!y){this.__logEvent(m.EVENT_INVALIDATED_UPLOADING);this.inform('upload-failed',z);return;}if(x&&x.format)this.$VideoUploadSession30=x.format.isSpherical;if(!this.$VideoUploadSession5)this.__logEvent(m.EVENT_STARTED_FLOW,{is_spherical:this.$VideoUploadSession30?'true':null});this.$VideoUploadSession37=this.$VideoUploadSession12&&this.$VideoUploadSession28.getSize()>=this.$VideoUploadSession13;this.$VideoUploadSession38=false;this.$VideoUploadSession39=false;this.$VideoUploadSession40=0;this.$VideoUploadSession41=this.$VideoUploadSession40;this.$VideoUploadSession42=0;if(this.$VideoUploadSession37){this.$VideoUploadSession43=Math.floor(this.$VideoUploadSession28.getSize()/2);this.$VideoUploadSession44=this.$VideoUploadSession43;this.$VideoUploadSession45=this.$VideoUploadSession44;this.$VideoUploadSession46=0;this.$VideoUploadSession47=this.$VideoUploadSession28.getSize();}else this.$VideoUploadSession43=this.$VideoUploadSession28.getSize();var ba=new q().setFile(this.$VideoUploadSession28).setTargetID(this.$VideoUploadSession2).setSource(this.$VideoUploadSession1).setWaterfallID(this.$VideoUploadSession23).setSupportsChunking(this.$VideoUploadSession10).setSupportsFileAPI(this.$VideoUploadSession11).setCreatorProduct(this.$VideoUploadSession28.getCreatorProduct()).setPartitionStartOffset(this.$VideoUploadSession40).setPartitionEndOffset(this.$VideoUploadSession43);if(ba.setComposerEntryPointRef)ba.setComposerEntryPointRef(this.$VideoUploadSession7);this.$VideoUploadSession48();this.$VideoUploadSession15.sendRequest(ba);this.inform('metadata-parsed',x);};w.prototype.$VideoUploadSession16=function(x){'use strict';var y=this.$VideoUploadSession10?x.chunk_start_uri:x.start_uri,z=this.__getVideoUploadStartRequestManager(y,x.start_max_transport_retries,x.start_transport_retry_interval_base,x.skip_upload_enabled,x.skip_upload_file_size_limit,x.start_max_server_retries,x.start_server_retry_interval_base);z.subscribe('request-started',this.$VideoUploadSession49.bind(this));z.subscribe('request-finished',this.$VideoUploadSession50.bind(this));z.subscribe('request-failed',this.$VideoUploadSession51.bind(this));return z;};w.prototype.$VideoUploadSession18=function(x){'use strict';var y=this.$VideoUploadSession10?x.chunk_receive_uri:x.receive_uri,z=this.__getVideoUploadReceiveRequestManager(y,x);z.subscribe('request-started',this.$VideoUploadSession52.bind(this));z.subscribe('request-progressed',this.$VideoUploadSession53.bind(this));z.subscribe('request-finished',this.$VideoUploadSession54.bind(this));z.subscribe('request-failed',this.$VideoUploadSession55.bind(this));z.subscribe('request-timeout',this.$VideoUploadSession56.bind(this));z.subscribe('online',this.$VideoUploadSession57.bind(this));z.subscribe('offline',this.$VideoUploadSession58.bind(this));return z;};w.prototype.$VideoUploadSession21=function(x){'use strict';var y=this.$VideoUploadSession10?x.chunk_post_uri:x.post_uri,z=this.__getVideoUploadPostRequestManager(y,x);z.subscribe('request-finished',this.__handlePostRequestFinished.bind(this));z.subscribe('request-failed',this.$VideoUploadSession59.bind(this));return z;};w.prototype.$VideoUploadSession49=function(event,x){'use strict';this.__logEvent(m.EVENT_STARTED_UPLOADING,{hash_time:x.hash_time,hash_exception:x.hash_exception});this.__logEvent(m.EVENT_STARTED_START_REQUEST);this.$VideoUploadSession60=Date.now();this.inform('upload-started');};w.prototype.$VideoUploadSession50=function(event,x){'use strict';this.__logEvent(m.EVENT_PROGRESS_UPLOADING_START_REQUEST,{transport_retries:x.transport_retries,hash_time:x.hash_time,skip_upload:x.skip_upload?1:null});this.__logEvent(m.EVENT_FINISHED_START_REQUEST);this.$VideoUploadSession25=x.video_id;this.$VideoUploadSession61=x.skip_upload;if(!x.skip_upload){var y;y=this.__createReceiveRequestContext(x,false);this.$VideoUploadSession17.sendRequest(y);if(this.$VideoUploadSession37){y=this.__createReceiveRequestContext(x,true);this.$VideoUploadSession19.sendRequest(y);}}else{this.inform('upload-progressed',{start_offset:0,end_offset:this.$VideoUploadSession28.getSize(),file_size:this.$VideoUploadSession28.getSize(),sent_bytes:this.$VideoUploadSession28.getSize()});if(this.$VideoUploadSession5)this.__logFinishedUploading();this.inform('upload-finished',{start_offset:0,end_offset:this.$VideoUploadSession28.getSize()});}};w.prototype.__fetchReceiveRequestManagerStateLogData=function(){'use strict';var x={};if(this.$VideoUploadSession17!=null)this.$VideoUploadSession17.appendStateLogData(x,'requestManager_');if(this.$VideoUploadSession19!=null)this.$VideoUploadSession19.appendStateLogData(x,'requestManagerEx_');return x;};w.prototype.__createReceiveRequestContext=function(x,y){'use strict';if(!y)y=false;var z=new q();this.__setupReceiveRequestContext(z,x,y);return z;};w.prototype.__setupReceiveRequestContext=function(x,y,z){'use strict';var aa,ba,ca,da;if(!z){aa=this.$VideoUploadSession40;ba=this.$VideoUploadSession43;ca=y.start_offset;da=y.end_offset;}else{aa=this.$VideoUploadSession44;ba=this.$VideoUploadSession47;ca=this.$VideoUploadSession44;da=this.$VideoUploadSession44+this.$VideoUploadSession14>=this.$VideoUploadSession47?this.$VideoUploadSession47:this.$VideoUploadSession44+this.$VideoUploadSession14;}x.setFile(this.$VideoUploadSession28).setVideoID(y.video_id).setStartOffset(ca).setEndOffset(da).setPartitionStartOffset(aa).setPartitionEndOffset(ba).setTargetID(this.$VideoUploadSession2).setSource(this.$VideoUploadSession1).setWaterfallID(this.$VideoUploadSession23).setSupportsChunking(this.$VideoUploadSession10);if(x.setComposerEntryPointRef)x.setComposerEntryPointRef(this.$VideoUploadSession7);};w.prototype.$VideoUploadSession51=function(event,x){'use strict';var y=this.__getLogErrorData(x);this.__logEvent(m.EVENT_FAILED_START_REQUEST,y);this.__logEvent(m.EVENT_FAILED_UPLOADING,y);var z=x.error_is_transient?m.EVENT_RESIGNED_FLOW:m.EVENT_FAILED_FLOW;if(this.$VideoUploadSession5){if(this.$VideoUploadSession34){this.__logEvent(z);this.$VideoUploadSession34=false;}}else this.__logEvent(z);this.$VideoUploadSession62();this.inform('upload-failed',x);};w.prototype.$VideoUploadSession52=function(event,x){'use strict';if(!x.start_offset&&!x.transport_retries&&!x.server_retries)this.__logEvent(m.EVENT_STARTED_SENDING_BYTES,{total_bytes:this.$VideoUploadSession28.getSize()});if(this.$VideoUploadSession10)this.__logEvent(m.EVENT_STARTED_SENDING_CHUNK_BYTES,{start_offset:x.start_offset,total_bytes:x.end_offset-x.start_offset,transport_retries:x.transport_retries,server_retries:x.server_retries,upload_speed:x.upload_speed});};w.prototype.$VideoUploadSession53=function(event,x){'use strict';if(x.start_offset<this.$VideoUploadSession43){this.$VideoUploadSession41=x.start_offset;this.$VideoUploadSession42=x.sent_bytes;}else{this.$VideoUploadSession45=x.start_offset;this.$VideoUploadSession46=x.sent_bytes;}x.start_offset=this.$VideoUploadSession41;x.sent_bytes=this.$VideoUploadSession42;if(this.$VideoUploadSession37){x.start_offset+=this.$VideoUploadSession45-this.$VideoUploadSession44;x.sent_bytes+=this.$VideoUploadSession46;}var y=Math.min(x.start_offset+x.sent_bytes,x.file_size);if(y>this.$VideoUploadSession29){this.$VideoUploadSession29=y;this.inform('upload-progressed',x);}};w.prototype.$VideoUploadSession54=function(event,x){'use strict';if(this.$VideoUploadSession10)this.__logEvent(m.EVENT_FINISHED_SENDING_CHUNK_BYTES,{start_offset:x.start_offset,sent_bytes:x.end_offset-x.start_offset,transport_retries:x.transport_retries,server_retries:x.server_retries,upload_speed:x.upload_speed});if(x.start_offset<this.$VideoUploadSession43){this.$VideoUploadSession38=x.end_offset>=this.$VideoUploadSession43;}else this.$VideoUploadSession39=x.end_offset>=this.$VideoUploadSession47;if(!this.$VideoUploadSession11||this.$VideoUploadSession38&&(!this.$VideoUploadSession37||this.$VideoUploadSession39)){this.__logEvent(m.EVENT_FINISHED_SENDING_BYTES,{sent_bytes:this.$VideoUploadSession28.getSize()});this.$VideoUploadSession35=Date.now()-this.$VideoUploadSession60;if(this.$VideoUploadSession5)this.__logFinishedUploading();this.inform('upload-finished',x);}};w.prototype.$VideoUploadSession55=function(event,x){'use strict';var y=this.__getLogErrorData(x);if(this.$VideoUploadSession10)this.__logEvent(m.EVENT_FAILED_SENDING_CHUNK_BYTES,y);this.__logEvent(m.EVENT_FAILED_UPLOADING,y);var z=x.error_is_transient?m.EVENT_RESIGNED_FLOW:m.EVENT_FAILED_FLOW;if(this.$VideoUploadSession5){if(this.$VideoUploadSession34){this.__logEvent(z);this.$VideoUploadSession34=false;}}else this.__logEvent(z);this.$VideoUploadSession62();this.inform('upload-failed',x);};w.prototype.$VideoUploadSession56=function(event,x){'use strict';this.__logEvent(m.EVENT_TIMEOUT_SENDING_CHUNK_BYTES,{start_offset:x.start_offset,sent_bytes:x.end_offset-x.start_offset,transport_retries:x.transport_retries,server_retries:x.server_retries,timeout_retries:x.timeout_retries,upload_speed:x.upload_speed});};w.prototype.$VideoUploadSession57=function(event,x){'use strict';this.inform('online',x);};w.prototype.$VideoUploadSession58=function(event,x){'use strict';this.inform('offline',x);};w.prototype.__handlePostRequestFinished=function(event,x){'use strict';this.__logEvent(m.EVENT_FINISHED_POST_REQUEST);if(!x.video_id)x.video_id=this.$VideoUploadSession25;if(!this.$VideoUploadSession5)this.__logFinishedUploading();this.__logEvent(m.EVENT_FINISHED_FLOW);this.$VideoUploadSession34=false;this.$VideoUploadSession62();var y=babelHelpers['extends']({},x,this.$VideoUploadSession32);this.inform('post-finished',y);};w.prototype.__logFinishedUploading=function(){'use strict';this.__logEvent(m.EVENT_FINISHED_UPLOADING,{elapsed_time:this.$VideoUploadSession35,skip_upload:this.$VideoUploadSession61?1:null});this.$VideoUploadSession27=true;};w.prototype.$VideoUploadSession59=function(event,x){'use strict';var y=this.__getLogErrorData(x);this.__logEvent(m.EVENT_FAILED_POST_REQUEST,y);if(this.$VideoUploadSession26){this.__logEvent(m.EVENT_FAILED_UPLOADING,y);var z=x.error_is_transient?m.EVENT_RESIGNED_FLOW:m.EVENT_FAILED_FLOW;this.__logEvent(z);}this.$VideoUploadSession62();this.inform('post-failed',x);};w.prototype.$VideoUploadSession33=function(){'use strict';this.$VideoUploadSession15.cancelRequest();this.$VideoUploadSession17.cancelRequest();if(this.$VideoUploadSession37)this.$VideoUploadSession19.cancelRequest();this.$VideoUploadSession62();if(this.$VideoUploadSession25){new i('/ajax/video/actions/delete').setData({fbid:this.$VideoUploadSession25,redirect:false}).send();this.$VideoUploadSession25=null;}};w.prototype.$VideoUploadSession48=function(){'use strict';this.$VideoUploadSession26=true;if(this.$VideoUploadSession8){this.$VideoUploadSession36=new j(this.$VideoUploadSession23,this.$VideoUploadSession6,this.$VideoUploadSession1,this.$VideoUploadSession2,this.$VideoUploadSession3,this.$VideoUploadSession10,this.$VideoUploadSession7,!this.$VideoUploadSession5||this.$VideoUploadSession34);this.$VideoUploadSession36.startSession();}};w.prototype.$VideoUploadSession62=function(){'use strict';this.$VideoUploadSession26=false;if(this.$VideoUploadSession36){this.$VideoUploadSession36.endSession();this.$VideoUploadSession36=null;}};w.prototype.__getLogErrorData=function(x){'use strict';return {error:x.error_summary,error_code:x.error_code,error_description:x.error_description,transport_retries:x.transport_retries,server_retries:x.server_retries};};w.prototype.__logEvent=function(event,x){'use strict';var y=this.getLogger();x=x||{};if(this.$VideoUploadSession28){x.file_size=this.$VideoUploadSession28.getSize();x.file_extension=this.$VideoUploadSession28.getExtension();x.sent_bytes=this.$VideoUploadSession29;}y.logEvent(event,x);};w.prototype.__getVideoUploadStartRequestManager=function(x,y,z,aa,ba,ca,da){'use strict';return new r(x,y,z,aa,ba,ca,da);};w.prototype.__getVideoUploadReceiveRequestManager=function(x,y){'use strict';return new p(x,y.max_transport_retries,y.max_server_retries,y.response_timeout_enabled,y.max_response_timeout_retries,y.response_timeout_speed_variation_factor_ppt,y.transport_retry_interval_base,y.server_retry_interval_base,y.receive_errors_force_retry);};w.prototype.__getVideoUploadPostRequestManager=function(x,y){'use strict';return new o(x,y.post_max_transport_retries,y.post_transport_retry_interval_base,y.post_max_server_retries,y.post_server_retry_interval_base);};f.exports=w;},null);
__d('VideoUploader',['ArbiterMixin','VideoUploadCrashMonitor','VideoUploadLogger','VideoUploadSession','arrayContains','mixin'],function a(b,c,d,e,f,g,h,i,j,k,l,m){var n,o;if(c.__markCompiled)c.__markCompiled();n=babelHelpers.inherits(p,m(h));o=n&&n.prototype;function p(q){'use strict';o.constructor.call(this);this.$VideoUploader1=q;this.$VideoUploader2=null;if(q.monitor_crashes){this.$VideoUploader3=new i();this.$VideoUploader3.logKnownCrashes();}}p.prototype.getLogger=function(){'use strict';if(!this.$VideoUploader2)return;if(this.$VideoUploader2.getLogger)return this.$VideoUploader2.getLogger();};p.prototype.upload=function(q){'use strict';if(this.$VideoUploader2)return;this.$VideoUploader2=this.__getVideoUploadSession(this.$VideoUploader1);this.$VideoUploader2.subscribe(this.__getEventsWhichShouldListenFromSession(),function(event,r){return this.$VideoUploader4(event,r);}.bind(this));this.$VideoUploader2.start(q);};p.prototype.__getVideoUploadSession=function(q){'use strict';return new k(q);};p.prototype.__getEventsWhichShouldListenFromSession=function(){'use strict';return ['upload-requested','upload-started','upload-progressed','upload-finished','upload-failed','post-started','post-finished','post-failed','online','offline','metadata-parsed'];};p.prototype.postUserRequest=function(){'use strict';if(!this.$VideoUploader2)return;if(this.$VideoUploader2.startFlow)this.$VideoUploader2.startFlow();};p.prototype.post=function(q){'use strict';if(!this.$VideoUploader2)return;this.$VideoUploader2.post(q);};p.prototype.cancel=function(){'use strict';if(!this.$VideoUploader2)return;this.$VideoUploader2.cancel();this.$VideoUploader2=null;};p.prototype.abandon=function(){'use strict';if(!this.$VideoUploader2)return;this.$VideoUploader2.abandon();this.$VideoUploader2=null;};p.prototype.reset=function(){'use strict';this.$VideoUploader2=null;};p.prototype.getUploadSession=function(){'use strict';return this.$VideoUploader2;};p.prototype.getLoggerData=function(){'use strict';return {waterfall_id:this.$VideoUploader2?this.$VideoUploader2.$VideoUploader5:null,actor_id:this.$VideoUploader1.actor_id,target_id:this.$VideoUploader1.target_id,target_type:this.$VideoUploader1.target_type,composer_entry_point_ref:this.$VideoUploader1.composer_entry_point_ref};};p.prototype.isPostInProgress=function(){'use strict';return !!this.$VideoUploader2&&this.$VideoUploader2.isPostInProgress();};p.prototype.isSessionInProgress=function(){'use strict';return !!this.$VideoUploader2&&this.$VideoUploader2.isInProgress();};p.prototype.__getSession=function(){'use strict';return this.$VideoUploader2;};p.prototype.__getEventsForWhichSessionShouldBeSetToNull=function(){'use strict';return ['upload-failed','post-finished'];};p.prototype.$VideoUploader4=function(event,q){'use strict';if(l(this.__getEventsForWhichSessionShouldBeSetToNull(),event))this.$VideoUploader2=null;this.__delegateEvent(event,q);};p.prototype.__delegateEvent=function(event,q){'use strict';this.inform(event,q);};f.exports=p;},null);
__d("XPagesComposerDialogController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/composer\/dialog\/",{page_id:{type:"Int",required:true},entry_point:{type:"String",required:true},open_composer:{type:"Enum",enumType:1},preview_url:{type:"String"},__asyncDialog:{type:"Int"}});},null);