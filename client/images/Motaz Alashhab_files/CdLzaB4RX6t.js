/*!CK:2933679613!*//*1456170255,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["kXet7"]); }

__d('VideoChannelProgressCircle.react',['Image.react','React','ReactDOM','Style','cx'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=i.PropTypes,n=i.createClass({displayName:'VideoChannelProgressCircle',_interval:0,_circlePerimeter:0,componentDidMount:function(){this.drawProgressCircle();},componentDidUpdate:function(){this.drawProgressCircle();},componentWillUnmount:function(){clearInterval(this._interval);},drawProgressCircle:function(){var o=j.findDOMNode(this.refs.progressCircle),p=this._circlePerimeter,q=p/100;k.set(o,'stroke-dashoffset',p+'px');clearInterval(this._interval);if(this.props.makeProgress)this._interval=setInterval(function(){p-=q;k.set(o,'stroke-dashoffset',p+'px');if(p<=0){clearInterval(this._interval);this.props.onProgressDone();}}.bind(this),this.props.timeoutSec*10);},propTypes:{makeProgress:m.bool.isRequired,onProgressDone:m.func.isRequired,timeoutSec:m.number.isRequired},render:function(){this._circlePerimeter=38*2*Math.PI;return (i.createElement('div',null,i.createElement('svg',{className:"_20_8"},i.createElement('circle',{cx:'40',cy:'40',r:'38',stroke:'#ffffff',strokeWidth:'4',strokeDasharray:this._circlePerimeter,fill:'transparent'}),i.createElement('circle',{ref:'progressCircle',cx:'40',cy:'40',r:'38',stroke:'#5890ff',strokeWidth:'4',strokeDasharray:this._circlePerimeter,fill:'transparent'})),i.createElement(h,{className:"_3uya",src:'/images/video/channel_view/replay.svg'})));}});f.exports=n;},null);
__d('VideoChannelEndScreen',['CSS','DOM','Event','React','ReactDOM','VideoChannelProgressCircle.react','cx','invariant'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();function p(q){'use strict';this.$VideoChannelEndScreen1=i.create('div',{className:"_1szy"});this.$VideoChannelEndScreen2=i.create('div',{className:"_1szz"},this.$VideoChannelEndScreen1);j.listen(this.$VideoChannelEndScreen2,'click',function(){q();});}p.prototype.showEndScreen=function(q,r,s){'use strict';!q?o(0):undefined;h.addClass(q,"_1s-2");q.appendChild(this.$VideoChannelEndScreen2);l.render(k.createElement(m,{makeProgress:r,onProgressDone:s,timeoutSec:3}),this.$VideoChannelEndScreen1);};p.prototype.endCountdown=function(q){'use strict';!q?o(0):undefined;h.removeClass(q,"_1s-2");l.unmountComponentAtNode(this.$VideoChannelEndScreen1);};f.exports=p;},null);
__d('VideoWatchAndScrollContainer.react',['DOM','DOMContainer.react','DOMDimensions','Event','Parent','React','ReactCSSTransitionGroup','Rect','SubscriptionsHandler','cancelAnimationFrame','csx','cx','getViewportDimensions','requestAnimationFrame','shallowCompare','throttle'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){'use strict';var x,y;if(c.__markCompiled)c.__markCompiled();var z=m.PropTypes,aa=300,ba=530,ca={NW:'nw',NE:'ne',SE:'se',SW:'sw'};x=babelHelpers.inherits(da,m.Component);y=x&&x.prototype;function da(ea,fa){y.constructor.call(this,ea,fa);this.state=this.$VideoWatchAndScrollContainer1(this.props);}da.prototype.$VideoWatchAndScrollContainer1=function(ea){var fa=this.$VideoWatchAndScrollContainer2(),ga=this.$VideoWatchAndScrollContainer3(this.props.initialPosition,fa);return {containerBoundingBox:fa,dragging:false,draggingStartHeight:0,draggingStartLeft:0,draggingStartMousePositionX:0,draggingStartMousePositionY:0,draggingStartTop:0,draggingStartWidth:0,height:ga.height,left:ga.left,resizeDirection:null,top:ga.top,channelVideoElements:[],width:ga.width};};da.prototype.shouldComponentUpdate=function(ea,fa){return v(this,ea,fa);};da.prototype.componentDidUpdate=function(ea,fa){if(!fa)return;if(!fa.dragging&&this.state.dragging){this.documentSubscriptions=new p();this.documentSubscriptions.addSubscriptions(k.listen(document,'mousemove',this.$VideoWatchAndScrollContainer4.bind(this)),k.listen(document,'mouseup',this.$VideoWatchAndScrollContainer5.bind(this)));}else if(fa.dragging&&!this.state.dragging)this.documentSubscriptions.release();};da.prototype.componentDidMount=function(){this.resizeListener=k.listen(window,'resize',w(function(){var ea=this.$VideoWatchAndScrollContainer2(),fa=this.$VideoWatchAndScrollContainer3({height:this.state.height,left:this.state.left,top:this.state.top,width:this.state.width},ea);this.setState({containerBoundingBox:ea,height:fa.height,left:fa.left,top:fa.top,width:fa.width});}.bind(this),100));};da.prototype.componentWillUnmount=function(){this.props.onInitialPositionUpdate({height:this.state.height,left:this.state.left,top:this.state.top,width:this.state.width});if(this.documentSubscriptions)this.documentSubscriptions.release();if(this.resizeListener)this.resizeListener.remove();};da.prototype.$VideoWatchAndScrollContainer6=function(ea,event){this.$VideoWatchAndScrollContainer7(event,ea);};da.prototype.$VideoWatchAndScrollContainer8=function(event){this.$VideoWatchAndScrollContainer7(event,null);};da.prototype.$VideoWatchAndScrollContainer7=function(event,ea){if(event.button!==0)return;if(l.bySelector(event.target,"._360f"))return;this.props.onGrab();this.setState({containerBoundingBox:this.$VideoWatchAndScrollContainer2(),dragging:true,draggingStartHeight:this.state.height,draggingStartLeft:this.state.left,draggingStartMousePositionX:event.screenX,draggingStartMousePositionY:event.screenY,draggingStartTop:this.state.top,draggingStartWidth:this.state.width,resizeDirection:ea});event.preventDefault();};da.prototype.$VideoWatchAndScrollContainer2=function(){var ea=0,fa=h.scry(document.body,".fbChatSidebar");if(fa.length===1)ea=j.getElementDimensions(fa[0]).width;var ga=t.withoutScrollbars(),ha=new o(43,ga.width-ea,ga.height,0);return ha;};da.prototype.$VideoWatchAndScrollContainer3=function(ea,fa){var ga=new o(ea.top,ea.left+ea.width,ea.top+ea.height,ea.left);ga=ga.boundWithin(fa);return {height:ga.h(),left:ga.getLeft(),top:ga.getTop(),width:ga.w()};};da.prototype.$VideoWatchAndScrollContainer9=function(ea,fa,ga){var ha=ea.top,ia=fa.getTop(),ja=ia-ha;if(ja>0){if(ga===ca.NE||ga===ca.NW)ea.height-=ja;ea.top=ia;}var ka=ea.left,la=fa.getLeft(),ma=la-ka;if(ma>0){if(ga===ca.NW||ga===ca.SW)ea.width-=ma;ea.left=la;}var na=ea.top+ea.height,oa=fa.getTop()+fa.h(),pa=na-oa;if(pa>0)ea.height=oa-ea.top;var qa=ea.left+ea.width,ra=fa.getLeft()+fa.w(),sa=qa-ra;if(sa>0)ea.width=ra-ea.left;};da.prototype.$VideoWatchAndScrollContainer10=function(ea,fa,ga){if(ea.width<aa){if(ga===ca.NW||ga===ca.SW)ea.left-=aa-ea.width;ea.width=aa;}if(ea.height<aa){if(ga===ca.NE||ga===ca.NW)ea.top-=aa-ea.height;ea.height=aa;}};da.prototype.$VideoWatchAndScrollContainer11=function(ea,fa,ga){if(ea.width>ba){if(ga===ca.NW||ga===ca.SW)ea.left+=ea.width-ba;ea.width=ba;}if(ea.height>ba){if(ga===ca.NE||ga===ca.NW)ea.top+=ea.height-ba;ea.height=ba;}};da.prototype.$VideoWatchAndScrollContainer12=function(ea,fa,ga){var ha=ea.width/ea.height,ia=fa.width/fa.height;if(ha>ia){var ja=ea.height*ia;if(ga===ca.NW||ga===ca.SW)ea.left+=ea.width-ja;ea.width=ja;}else if(ha<ia){var ka=ea.width/ia;if(ga===ca.NE||ga===ca.NW)ea.top+=ea.height-ka;ea.height=ka;}};da.prototype.$VideoWatchAndScrollContainer13=function(ea,fa,ga,ha){this.$VideoWatchAndScrollContainer9(ea,ga,ha);this.$VideoWatchAndScrollContainer10(ea,fa,ha);this.$VideoWatchAndScrollContainer11(ea,fa,ha);this.$VideoWatchAndScrollContainer12(ea,fa,ha);return {height:ea.height,left:ea.left,top:ea.top,width:ea.width};};da.prototype.$VideoWatchAndScrollContainer4=function(event){q(this.dragUpdateRequestAnimationFrameID);this.dragUpdateRequestAnimationFrameID=u(this.$VideoWatchAndScrollContainer14.bind(this,event));};da.prototype.$VideoWatchAndScrollContainer14=function(event){if(!this.state.dragging)return;var ea=event.screenX-this.state.draggingStartMousePositionX,fa=event.screenY-this.state.draggingStartMousePositionY,ga=this.state.resizeDirection,ha;if(!ga){ha=this.$VideoWatchAndScrollContainer3({height:this.state.draggingStartHeight,left:this.state.draggingStartLeft+ea,top:this.state.draggingStartTop+fa,width:this.state.draggingStartWidth},this.state.containerBoundingBox);this.setState({height:ha.height,left:ha.left,top:ha.top,width:ha.width});}else{var ia=this.state.draggingStartHeight,ja=this.state.draggingStartLeft,ka=this.state.draggingStartTop,la=this.state.draggingStartWidth;if(ga===ca.NE||ga===ca.SE)la+=ea;if(ga===ca.NW||ga===ca.SW){ja+=ea;la-=ea;}if(ga===ca.SE||ga===ca.SW)ia+=fa;if(ga===ca.NE||ga===ca.NW){ka+=fa;ia-=fa;}ha=this.$VideoWatchAndScrollContainer13({height:ia,left:ja,top:ka,width:la},{height:this.state.draggingStartHeight,left:this.state.draggingStartLeft,top:this.state.draggingStartTop,width:this.state.draggingStartWidth},this.state.containerBoundingBox,ga);this.setState({height:ha.height,left:ha.left,top:ha.top,width:ha.width});}event.preventDefault();};da.prototype.$VideoWatchAndScrollContainer5=function(event){q(this.dragUpdateRequestAnimationFrameID);this.props.onDrop();this.setState({dragging:false,draggingStartHeight:0,draggingStartLeft:0,draggingStartMousePositionX:0,draggingStartMousePositionY:0,draggingStartTop:0,draggingStartWidth:0,resizeDirection:null});event.preventDefault();};da.prototype.render=function(){var ea={height:Math.round(this.state.height)+'px',left:this.state.left+'px',top:this.state.top+'px',width:Math.round(this.state.width)+'px'};this.props.onInitialPositionUpdate({height:this.state.height,left:this.state.left,top:this.state.top,width:this.state.width});var fa=[this.props.initialVideoElement].concat(this.state.channelVideoElements);return (m.createElement(n,{transitionAppear:true,transitionAppearTimeout:500,transitionEnter:false,transitionLeave:false,transitionName:'fbWatchAndScroll-FadeIn'},m.createElement('div',{className:"_360g",style:ea},m.createElement('div',{className:"_52u8",onMouseDown:this.$VideoWatchAndScrollContainer8.bind(this)},m.createElement('ul',null,fa.map(function(ga,ha){var ia=ha===fa.length-1,ja=!ia?"_3gna":'';return (m.createElement('li',{key:'videoElement_'+ha,className:ja},m.createElement(i,null,ga)));}))),m.createElement('div',{className:"_52ua",onMouseDown:this.$VideoWatchAndScrollContainer6.bind(this,ca.NW)}),m.createElement('div',{className:"_52uc",onMouseDown:this.$VideoWatchAndScrollContainer6.bind(this,ca.NE)}),m.createElement('div',{className:"_52ui",onMouseDown:this.$VideoWatchAndScrollContainer6.bind(this,ca.SE)}),m.createElement('div',{className:"_52uj",onMouseDown:this.$VideoWatchAndScrollContainer6.bind(this,ca.SW)}))));};da.propTypes={initialPosition:z.object.isRequired,onDrop:z.func.isRequired,onGrab:z.func.isRequired,onInitialPositionUpdate:z.func.isRequired,initialVideoElement:z.instanceOf(HTMLElement).isRequired};f.exports=da;},null);
__d('VideoWatchAndScrollController',['CSS','DOM','DOMDimensions','EventListener','React','ReactDOM','SubscriptionsHandler','VideoAutoplayControllerX','VideoChainingCaller','VideoChannelEndScreen','VideoChannelStoryFetcher','VideoFrameBuffer','VideoPlayerLoggerEvent','VideoPlayerReason','VideoWatchAndScrollContainer.react','cancelAnimationFrame','cx','destroyOnUnload','getViewportDimensions','invariant','requestAnimationFrame','throttle'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca){if(c.__markCompiled)c.__markCompiled();var da=169,ea=300,fa=10,ga=300,ha=300,ia=300,ja=2,ka=null;function la(ma,na,oa,pa){'use strict';this.$VideoWatchAndScrollController36=new n();this.$VideoWatchAndScrollController1=null;this.$VideoWatchAndScrollController2=null;this.$VideoWatchAndScrollController3=false;this.$VideoWatchAndScrollController4=ma;this.$VideoWatchAndScrollController5=na;this.$VideoWatchAndScrollController39=oa;this.$VideoWatchAndScrollController40=pa;this.$VideoWatchAndScrollController38=null;if(this.$VideoWatchAndScrollController40){this.$VideoWatchAndScrollController38=new r(this.$VideoWatchAndScrollController5,this.$VideoWatchAndScrollController4,this.$VideoWatchAndScrollController39,null);this.$VideoWatchAndScrollController38.setIsWatchAndScroll(true);}this.$VideoWatchAndScrollController41=[];this.$VideoWatchAndScrollController6=da;this.$VideoWatchAndScrollController7=ea;this.$VideoWatchAndScrollController10=window.document.getElementById('leftCol');this.$VideoWatchAndScrollController11=window.document.getElementById('pagelet_bluebar');this.$VideoWatchAndScrollController43();y(function(){this.$VideoWatchAndScrollController44();if(this.$VideoWatchAndScrollController3)this.$VideoWatchAndScrollController45();if(this.$VideoWatchAndScrollController36)this.$VideoWatchAndScrollController36.release();if(this===ka)ka=null;}.bind(this));this.$VideoWatchAndScrollController42=new q(function(){this.$VideoWatchAndScrollController42.endCountdown(this.$VideoWatchAndScrollController15);if(this.$VideoWatchAndScrollController16)this.$VideoWatchAndScrollController16.play(u.USER);}.bind(this));}la.registerVideoController=function(ma,na,oa,pa){'use strict';if(ka==null)ka=new la(ma.getVideoChannelID(),ma.getVideoID(),na,pa);ka.$VideoWatchAndScrollController36.addSubscriptions(ma.addListener('enterWatchAndScroll',function(){if(ka)ka.$VideoWatchAndScrollController46(ma);}),ma.addListener('exitWatchAndScroll',function(){if(ka)ka.$VideoWatchAndScrollController47(ma);}),ma.addListener('WatchAndScroll/close',function(){if(ka)ka.$VideoWatchAndScrollController48();}));var qa=['beginPlayback','changeVolume','muteVideo','qualityChange','toggleFullscreen','unmuteVideo','VideoChannelController/enterChannel'];qa.forEach(function(event){if(ka)ka.$VideoWatchAndScrollController36.addSubscriptions(ma.addListener(event,function(sa){if(ka)ka.$VideoWatchAndScrollController49(ma,oa,event,sa);}));});if(oa){var ra=['pausePlayback','finishPlayback','muteVideo'];ra.forEach(function(event){if(ka)ka.$VideoWatchAndScrollController36.addSubscriptions(ma.addListener(event,function(){if(ka)ka.$VideoWatchAndScrollController50(event);}));});}};la.registerChannelVideoController=function(ma){'use strict';if(!ka)return;ka.$VideoWatchAndScrollController41.push(ma);};la.prototype.$VideoWatchAndScrollController49=function(ma,na,event,oa){'use strict';if(this.$VideoWatchAndScrollController3){if(this.$VideoWatchAndScrollController16!==ma)this.$VideoWatchAndScrollController16.pause(u.USER);}else if(na)if(event==='toggleFullscreen'&&ma.isFullscreen()||event==='VideoChannelController/enterChannel'){if(this.$VideoWatchAndScrollController25)this.$VideoWatchAndScrollController44();}else if((event!=='beginPlayback'||Object(oa).reason===u.USER)&&ma.isState('playing')&&!ma.isMuted()&&!ma.isFullscreen()&&!ma.getIsInChannel())this.$VideoWatchAndScrollController51(ma);};la.prototype.$VideoWatchAndScrollController50=function(event){'use strict';if(this.$VideoWatchAndScrollController12&&event==='pausePlayback'){this.$VideoWatchAndScrollController12=false;}else if(!this.$VideoWatchAndScrollController21&&this.$VideoWatchAndScrollController25)this.$VideoWatchAndScrollController44();};la.prototype.$VideoWatchAndScrollController51=function(ma){'use strict';var na=ma.getVideoNode();if(!na.offsetParent)return;this.$VideoWatchAndScrollController25=ma;this.$VideoWatchAndScrollController32=ca(this.$VideoWatchAndScrollController52.bind(this),100);window.addEventListener('resize',this.$VideoWatchAndScrollController32);this.$VideoWatchAndScrollController53(na);this.$VideoWatchAndScrollController54();};la.prototype.$VideoWatchAndScrollController52=function(){'use strict';if(this.$VideoWatchAndScrollController25){this.$VideoWatchAndScrollController53(this.$VideoWatchAndScrollController19||this.$VideoWatchAndScrollController25.getVideoNode());this.$VideoWatchAndScrollController33();}};la.prototype.$VideoWatchAndScrollController55=function(ma){'use strict';var na={left:0,top:0};do{na.top+=ma.offsetTop;na.left+=ma.offsetLeft;}while(ma=ma.offsetParent);return na;};la.prototype.$VideoWatchAndScrollController53=function(ma){'use strict';this.$VideoWatchAndScrollController28=this.$VideoWatchAndScrollController55(ma);this.$VideoWatchAndScrollController34=ma.scrollWidth;this.$VideoWatchAndScrollController35=ma.scrollHeight;var na=Math.max(this.$VideoWatchAndScrollController34,this.$VideoWatchAndScrollController35);if(na<ia){var oa=ia/na;this.$VideoWatchAndScrollController34*=oa;this.$VideoWatchAndScrollController35*=oa;}var pa=z.withoutScrollbars();if(this.$VideoWatchAndScrollController10){var qa=this.$VideoWatchAndScrollController55(this.$VideoWatchAndScrollController10),ra=window.getComputedStyle(this.$VideoWatchAndScrollController10),sa=parseInt(ra.paddingTop,10);this.$VideoWatchAndScrollController27=qa.top+sa;if(this.$VideoWatchAndScrollController34>=this.$VideoWatchAndScrollController35){var ta=ia;}else ta=ia*this.$VideoWatchAndScrollController34/this.$VideoWatchAndScrollController35;if(qa.left<=this.$VideoWatchAndScrollController28.left){var ua=parseInt(ra.paddingRight,10),va=qa.left+this.$VideoWatchAndScrollController10.scrollWidth-ua;this.$VideoWatchAndScrollController23=Math.max(fa,va-this.$VideoWatchAndScrollController34);var wa=Math.max(ta,va-this.$VideoWatchAndScrollController23);}else{var xa=parseInt(ra.paddingLeft,10),ya=qa.left+xa,za=pa.width-fa;wa=Math.max(ta,Math.min(this.$VideoWatchAndScrollController34,za-ya));this.$VideoWatchAndScrollController23=Math.min(ya,za-wa);}}else{wa=ea;this.$VideoWatchAndScrollController23=fa;this.$VideoWatchAndScrollController27=fa;if(this.$VideoWatchAndScrollController11)this.$VideoWatchAndScrollController27+=this.$VideoWatchAndScrollController11.scrollHeight;}this.$VideoWatchAndScrollController24=wa/this.$VideoWatchAndScrollController34;this.$VideoWatchAndScrollController22=Math.abs(this.$VideoWatchAndScrollController28.left-this.$VideoWatchAndScrollController23)/ja;this.$VideoWatchAndScrollController26=this.$VideoWatchAndScrollController28.top-this.$VideoWatchAndScrollController27;};la.prototype.$VideoWatchAndScrollController54=function(){'use strict';if((this.$VideoWatchAndScrollController20||this.$VideoWatchAndScrollController25.isState('playing'))&&!this.$VideoWatchAndScrollController25.isMuted()){this.$VideoWatchAndScrollController56(this.$VideoWatchAndScrollController57.bind(this));this.$VideoWatchAndScrollController57();}else this.$VideoWatchAndScrollController44();};la.prototype.$VideoWatchAndScrollController57=function(){'use strict';if(this.$VideoWatchAndScrollController21||!this.$VideoWatchAndScrollController25)return;if(window.scrollY>this.$VideoWatchAndScrollController26){this.$VideoWatchAndScrollController8={left:this.$VideoWatchAndScrollController28.left-window.scrollX,top:this.$VideoWatchAndScrollController28.top-window.scrollY,width:this.$VideoWatchAndScrollController34,height:this.$VideoWatchAndScrollController35};h.addClass(this.$VideoWatchAndScrollController58(),"_5h98");this.$VideoWatchAndScrollController21=this.$VideoWatchAndScrollController25.addListener('stateChange',this.$VideoWatchAndScrollController59.bind(this));this.$VideoWatchAndScrollController60(this.$VideoWatchAndScrollController25,u.AUTOPLAY);this.$VideoWatchAndScrollController56(this.$VideoWatchAndScrollController61.bind(this));this.$VideoWatchAndScrollController61();}};la.prototype.$VideoWatchAndScrollController61=function(){'use strict';if(window.scrollY<=this.$VideoWatchAndScrollController26){h.removeClass(this.$VideoWatchAndScrollController58(),"_5h98");var ma=this.$VideoWatchAndScrollController25.isState('playing')||this.$VideoWatchAndScrollController21||this.$VideoWatchAndScrollController20;if(ma){this.$VideoWatchAndScrollController20=this.$VideoWatchAndScrollController25.addListener('stateChange',this.$VideoWatchAndScrollController62.bind(this));h.addClass(this.$VideoWatchAndScrollController25.getRootNode(),"_5h9g");var na=this.$VideoWatchAndScrollController25.getOption('VideoControls','areControlsVisible');if(!na&&!this.$VideoWatchAndScrollController31)this.$VideoWatchAndScrollController31=this.$VideoWatchAndScrollController25.getOption('VideoControls','acquireForceHideLock');}this.$VideoWatchAndScrollController45();if(ma)this.$VideoWatchAndScrollController25.play(u.AUTOPLAY);this.$VideoWatchAndScrollController54();}else if(!this.$VideoWatchAndScrollController37)this.$VideoWatchAndScrollController37=ba(this.$VideoWatchAndScrollController63.bind(this));};la.prototype.$VideoWatchAndScrollController62=function(){'use strict';if(this.$VideoWatchAndScrollController20&&this.$VideoWatchAndScrollController25.isState('playing')&&!this.$VideoWatchAndScrollController12)this.$VideoWatchAndScrollController64();};la.prototype.$VideoWatchAndScrollController59=function(){'use strict';if(this.$VideoWatchAndScrollController21&&this.$VideoWatchAndScrollController25.isState('playing')&&!this.$VideoWatchAndScrollController12)this.$VideoWatchAndScrollController65();};la.prototype.$VideoWatchAndScrollController63=function(){'use strict';delete this.$VideoWatchAndScrollController37;var ma=window.scrollY-this.$VideoWatchAndScrollController26,na=ma>=this.$VideoWatchAndScrollController22,oa=na?1:ma/this.$VideoWatchAndScrollController22,pa=this.$VideoWatchAndScrollController28.left+oa*(this.$VideoWatchAndScrollController23-this.$VideoWatchAndScrollController28.left),qa=1-oa*(1-this.$VideoWatchAndScrollController24),ra=qa*this.$VideoWatchAndScrollController35;this.$VideoWatchAndScrollController14.setState({left:pa-window.scrollX,top:this.$VideoWatchAndScrollController27,width:qa*this.$VideoWatchAndScrollController34,height:ra});if(na)this.$VideoWatchAndScrollController44();};la.prototype.$VideoWatchAndScrollController56=function(ma){'use strict';window.removeEventListener('scroll',this.$VideoWatchAndScrollController33);this.$VideoWatchAndScrollController33=ma||null;window.addEventListener('scroll',this.$VideoWatchAndScrollController33);w(this.$VideoWatchAndScrollController37);delete this.$VideoWatchAndScrollController37;};la.prototype.$VideoWatchAndScrollController44=function(){'use strict';window.removeEventListener('resize',this.$VideoWatchAndScrollController32);this.$VideoWatchAndScrollController56();if(this.$VideoWatchAndScrollController20)this.$VideoWatchAndScrollController64();if(this.$VideoWatchAndScrollController21){h.removeClass(this.$VideoWatchAndScrollController58(),"_5h98");this.$VideoWatchAndScrollController65();}delete this.$VideoWatchAndScrollController25;this.$VideoWatchAndScrollController43();};la.prototype.$VideoWatchAndScrollController64=function(){'use strict';h.removeClass(this.$VideoWatchAndScrollController25.getRootNode(),"_5h9g");if(this.$VideoWatchAndScrollController31){this.$VideoWatchAndScrollController31.release();delete this.$VideoWatchAndScrollController31;}this.$VideoWatchAndScrollController20.remove();delete this.$VideoWatchAndScrollController20;};la.prototype.$VideoWatchAndScrollController65=function(){'use strict';this.$VideoWatchAndScrollController21.remove();delete this.$VideoWatchAndScrollController21;};la.prototype.$VideoWatchAndScrollController46=function(ma){'use strict';this.$VideoWatchAndScrollController44();if(this.$VideoWatchAndScrollController3&&this.$VideoWatchAndScrollController16!==ma){this.$VideoWatchAndScrollController29=ma;this.$VideoWatchAndScrollController45();}else this.$VideoWatchAndScrollController60(ma,u.USER);};la.prototype.$VideoWatchAndScrollController60=function(ma,na){'use strict';!!this.$VideoWatchAndScrollController3?aa(0):undefined;this.$VideoWatchAndScrollController16=ma;this.$VideoWatchAndScrollController17=ma;var oa=ma.getVideoInfo();if(oa&&oa.isLiveStream&&this.$VideoWatchAndScrollController16.isPlayerVersion('silvercity')){this.$VideoWatchAndScrollController6=ha;this.$VideoWatchAndScrollController7=ga;this.$VideoWatchAndScrollController43();}this.$VideoWatchAndScrollController15=this.$VideoWatchAndScrollController16.getRootNode();this.$VideoWatchAndScrollController9={videoRootNode:this.$VideoWatchAndScrollController15.parentNode,dimensions:j.getElementDimensions(this.$VideoWatchAndScrollController15)};this.$VideoWatchAndScrollController19=this.$VideoWatchAndScrollController66(this.$VideoWatchAndScrollController9.dimensions,this.$VideoWatchAndScrollController16.getVideoNode());i.insertAfter(this.$VideoWatchAndScrollController15,this.$VideoWatchAndScrollController19);this.$VideoWatchAndScrollController13=k.listen(this.$VideoWatchAndScrollController15.parentNode,'click',function(){this.$VideoWatchAndScrollController44();this.$VideoWatchAndScrollController45();}.bind(this));this.$VideoWatchAndScrollController12=true;this.$VideoWatchAndScrollController16.pause(u.USER);this.$VideoWatchAndScrollController16.detachRootNode();this.$VideoWatchAndScrollController16.setDimensions(this.$VideoWatchAndScrollController7,this.$VideoWatchAndScrollController6);this.$VideoWatchAndScrollController3=true;this.$VideoWatchAndScrollController14=this.$VideoWatchAndScrollController67();this.$VideoWatchAndScrollController18=this.$VideoWatchAndScrollController68(this.$VideoWatchAndScrollController16);this.$VideoWatchAndScrollController16.play(na);this.$VideoWatchAndScrollController16.logEvent(t.PLAYER_FORMAT_CHANGED,{player_format:'watch_scroll'});if(this.$VideoWatchAndScrollController38){this.$VideoWatchAndScrollController69();this.$VideoWatchAndScrollController70(this.$VideoWatchAndScrollController16);}};la.prototype.$VideoWatchAndScrollController70=function(ma){'use strict';this.$VideoWatchAndScrollController36.addSubscriptions(ma.addListener('finishPlayback',function(){this.$VideoWatchAndScrollController42.showEndScreen(this.$VideoWatchAndScrollController15,!!this.$VideoWatchAndScrollController41.length,function(){if(this.$VideoWatchAndScrollController16.isState('finished'))this.$VideoWatchAndScrollController42.endCountdown(this.$VideoWatchAndScrollController15);if(this.$VideoWatchAndScrollController41.length)this.$VideoWatchAndScrollController71(this.$VideoWatchAndScrollController41.shift());}.bind(this));}.bind(this)));};la.prototype.$VideoWatchAndScrollController69=function(){'use strict';if(!this.$VideoWatchAndScrollController38)return;this.$VideoWatchAndScrollController38.fetchStories(true,function(ma){var na=this.$VideoWatchAndScrollController16.getRootNode().parentNode.parentNode;for(var oa=0;oa<ma.length;++oa)na.appendChild(ma[oa]);}.bind(this));};la.prototype.$VideoWatchAndScrollController71=function(ma){'use strict';this.$VideoWatchAndScrollController16=ma;this.$VideoWatchAndScrollController15=this.$VideoWatchAndScrollController16.getRootNode();this.$VideoWatchAndScrollController14.setState({channelVideoElements:[].concat(this.$VideoWatchAndScrollController14.state.channelVideoElements,[this.$VideoWatchAndScrollController15])});this.$VideoWatchAndScrollController16.play(u.AUTOPLAY);this.$VideoWatchAndScrollController36.addSubscriptions(this.$VideoWatchAndScrollController16.addListener('WatchAndScroll/close',function(){if(ka)ka.$VideoWatchAndScrollController48();}));this.$VideoWatchAndScrollController70(this.$VideoWatchAndScrollController16);if(!this.$VideoWatchAndScrollController41.length)this.$VideoWatchAndScrollController69();};la.prototype.$VideoWatchAndScrollController43=function(){'use strict';var ma=z.withoutScrollbars();this.$VideoWatchAndScrollController8={height:0+this.$VideoWatchAndScrollController6,left:fa,top:ma.height-this.$VideoWatchAndScrollController6-fa,width:0+this.$VideoWatchAndScrollController7};};la.prototype.$VideoWatchAndScrollController68=function(ma){'use strict';if(ma)return ma.addListener('stateChange',function(){if(ma.isState('playing')){o.setShouldAutoplay(false);}else o.setShouldAutoplay(true);});};la.prototype.$VideoWatchAndScrollController66=function(ma,na){'use strict';var oa=i.create('canvas',{className:"_308d"});oa.height=ma.height;oa.width=ma.width;if(oa.getContext&&oa.getContext('2d'))if(na instanceof window.HTMLVideoElement){var pa=new s(oa,na);pa.updateFrameBuffer();}return oa;};la.prototype.$VideoWatchAndScrollController48=function(){'use strict';if(this.$VideoWatchAndScrollController25)this.$VideoWatchAndScrollController44();this.$VideoWatchAndScrollController45();};la.prototype.$VideoWatchAndScrollController47=function(ma){'use strict';!this.$VideoWatchAndScrollController3?aa(0):undefined;if(!this.$VideoWatchAndScrollController41.length)!(ma===this.$VideoWatchAndScrollController16)?aa(0):undefined;this.$VideoWatchAndScrollController12=true;this.$VideoWatchAndScrollController16.pause(u.USER);this.$VideoWatchAndScrollController16.detachRootNode();m.unmountComponentAtNode(this.$VideoWatchAndScrollController58());i.remove(this.$VideoWatchAndScrollController19);delete this.$VideoWatchAndScrollController19;this.$VideoWatchAndScrollController13.remove();this.$VideoWatchAndScrollController18.remove();i.prependContent(this.$VideoWatchAndScrollController9.videoRootNode,this.$VideoWatchAndScrollController15);this.$VideoWatchAndScrollController16.setDimensions(this.$VideoWatchAndScrollController9.dimensions.width,this.$VideoWatchAndScrollController9.dimensions.height);this.$VideoWatchAndScrollController16.logEvent(t.PLAYER_FORMAT_CHANGED,{player_format:'inline'});if(this.$VideoWatchAndScrollController15)this.$VideoWatchAndScrollController42.endCountdown(this.$VideoWatchAndScrollController15);this.$VideoWatchAndScrollController9={};this.$VideoWatchAndScrollController16=null;this.$VideoWatchAndScrollController17=null;this.$VideoWatchAndScrollController3=false;o.setShouldAutoplay(true);this.$VideoWatchAndScrollController1=null;if(this.$VideoWatchAndScrollController29){this.$VideoWatchAndScrollController60(this.$VideoWatchAndScrollController29,u.USER);this.$VideoWatchAndScrollController29=null;}};la.prototype.$VideoWatchAndScrollController67=function(){'use strict';return m.render(l.createElement(v,{onDrop:this.$VideoWatchAndScrollController72.bind(this),onGrab:this.$VideoWatchAndScrollController73.bind(this),onInitialPositionUpdate:this.$VideoWatchAndScrollController74.bind(this),initialPosition:this.$VideoWatchAndScrollController8,initialVideoElement:this.$VideoWatchAndScrollController15}),this.$VideoWatchAndScrollController58());};la.prototype.$VideoWatchAndScrollController45=function(){'use strict';if(this.$VideoWatchAndScrollController17){if(this.$VideoWatchAndScrollController17===this.$VideoWatchAndScrollController16){this.$VideoWatchAndScrollController17.emit('exitWatchAndScroll');return;}this.$VideoWatchAndScrollController14.setState({videoElement:null},function(){this.$VideoWatchAndScrollController16=this.$VideoWatchAndScrollController17;this.$VideoWatchAndScrollController15=this.$VideoWatchAndScrollController16.getRootNode();this.$VideoWatchAndScrollController17.emit('exitWatchAndScroll');}.bind(this));}};la.prototype.$VideoWatchAndScrollController73=function(){'use strict';if(this.$VideoWatchAndScrollController25)this.$VideoWatchAndScrollController44();this.$VideoWatchAndScrollController30=this.$VideoWatchAndScrollController16.isState('playing');this.$VideoWatchAndScrollController16.pause(u.USER);};la.prototype.$VideoWatchAndScrollController72=function(){'use strict';if(this.$VideoWatchAndScrollController30)this.$VideoWatchAndScrollController16.play(u.USER);this.$VideoWatchAndScrollController30=null;};la.prototype.$VideoWatchAndScrollController74=function(ma){'use strict';this.$VideoWatchAndScrollController8=ma;this.$VideoWatchAndScrollController16.setDimensions(ma.width,ma.height);};la.prototype.$VideoWatchAndScrollController75=function(){'use strict';var ma=i.create('div');i.appendContent(document.body,ma);return ma;};la.prototype.$VideoWatchAndScrollController58=function(){'use strict';if(!this.$VideoWatchAndScrollController1)this.$VideoWatchAndScrollController1=this.$VideoWatchAndScrollController75();return this.$VideoWatchAndScrollController1;};f.exports=la;},null);