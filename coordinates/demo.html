<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
  <Title> RCH 3rd Floor </Title>
  <link rel="stylesheet" type="text/css" href="../dependencies/main.css">
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
  <script src="../dependencies/jquery.tabletoCSV.js" type="text/javascript" charset="utf-8"></script>
  <script src="../dependencies/jquery.csv.js"></script>
  <script src="../dependencies/pos.js" type="text/javascript"></script>
</head>

<body>
  <div id="container">
    <img src="../Waterloo Floor Plans/RCH_01FLR.png" id="myImgId"
    style="position: absolute; left: 0px; top:0px; z-index: 2;">
    <canvas id="myCanvas" width="1174" height="840"></canvas>
  </div>

  <div style="background-color:#E8E8E8">
    <!--Hit this button to export current coordinates to CSV.-->
    <div id="inputs" class="clearfix">
      <button id="export" data-export="export">Export</button>
      <button id="import">Import</button>
      <button id="draw" onclick="drawLine('122H7', '122H6')">Draw Line</button>
      <input type="file" id="files" name="files[]" multiple />
      <!-- For building selection from UWAPI. -->
      <select id="sel">
      </select>
    </div>

    <div>
      <!-- This div is for showing the markers on and off from the json file. -->
      <input type="button" id="markers_toggle" value="Show Markers" />
    </div>
    <output id="list">
    </output>
  </div>
  <script>
  $(function(){
    var nodes = $.getJSON( "https://raw.githubusercontent.com/eginwong/uNav/master/coordinates/room_nodes.json?token=AGViNaqNCV-Xe1RPLB_1Gy8sIgc0UHW7ks5WrtQNwA%3D%3D", function(data) {
    });
    console.log(JSON.parse(nodes.responseText));
  });
  function drawLine(p1, p2) {
    var canvas = document.getElementById('myCanvas');
    var context = canvas.getContext('2d');
    context.lineWidth ="5";
    context.strokeStyle="red";
    var jqxhr = $.getJSON( "https://raw.githubusercontent.com/eginwong/uNav/master/coordinates/room_nodes.json?token=AGViNaqNCV-Xe1RPLB_1Gy8sIgc0UHW7ks5WrtQNwA%3D%3D", function(data) {
      // var jqxhr = $.getJSON( "https://raw.githubusercontent.com/eginwong/uNav/master/geojson_ex.json?token=AGViNf2Dc0xvxTq2dPBIKQBqovSHPlInks5Wq6zMwA%3D%3D", function(data) {
      console.log(data);
      // console.log(data.features[0].properties);
    });
    // $.each(arrayCoord, function(i, coord) {
    //   if (i == 0) {
    //     context.moveTo(coord.x,coord.y);//120_stair
    //   }
    //   else{
    //     context.lineTo(coord.x,coord.y);//119a_hallway
    //   }
    // });
    // context.stroke();
  }
  // This function will show or hide markers depending on utility and options passed.
  function show_hide(str, mode){

  }

  $("#markers_toggle").on('click', firstClick)
  function firstClick() {
    $("#markers_toggle").prop('value', 'Hide Markers');
    // show_hide();
    $("#markers_toggle").off('click').on('click', secondClick)
  }

  function secondClick() {
    $("#markers_toggle").prop('value', 'Show Markers');
    // show_hide();
    $("#markers_toggle").off('click').on('click', firstClick)
  }
  </script>
</body>
</html>
